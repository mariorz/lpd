{
"version":3,
"file":"module$node_modules$$ethersproject$json_wallets$lib$keystore.js",
"lineCount":23,
"mappings":"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",
"sources":["node_modules/@ethersproject/json-wallets/lib/keystore.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$ethersproject$json_wallets$lib$keystore\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encrypt = exports.decrypt = exports.decryptSync = exports.KeystoreAccount = void 0;\nvar aes_js_1 = __importDefault(require(\"aes-js\"));\nvar scrypt_js_1 = __importDefault(require(\"scrypt-js\"));\nvar address_1 = require(\"@ethersproject/address\");\nvar bytes_1 = require(\"@ethersproject/bytes\");\nvar hdnode_1 = require(\"@ethersproject/hdnode\");\nvar keccak256_1 = require(\"@ethersproject/keccak256\");\nvar pbkdf2_1 = require(\"@ethersproject/pbkdf2\");\nvar random_1 = require(\"@ethersproject/random\");\nvar properties_1 = require(\"@ethersproject/properties\");\nvar transactions_1 = require(\"@ethersproject/transactions\");\nvar utils_1 = require(\"./utils\");\nvar logger_1 = require(\"@ethersproject/logger\");\nvar _version_1 = require(\"./_version\");\nvar logger = new logger_1.Logger(_version_1.version);\n// Exported Types\nfunction hasMnemonic(value) {\n    return (value != null && value.mnemonic && value.mnemonic.phrase);\n}\nvar KeystoreAccount = /** @class */ (function (_super) {\n    __extends(KeystoreAccount, _super);\n    function KeystoreAccount() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    KeystoreAccount.prototype.isKeystoreAccount = function (value) {\n        return !!(value && value._isKeystoreAccount);\n    };\n    return KeystoreAccount;\n}(properties_1.Description));\nexports.KeystoreAccount = KeystoreAccount;\nfunction _decrypt(data, key, ciphertext) {\n    var cipher = utils_1.searchPath(data, \"crypto/cipher\");\n    if (cipher === \"aes-128-ctr\") {\n        var iv = utils_1.looseArrayify(utils_1.searchPath(data, \"crypto/cipherparams/iv\"));\n        var counter = new aes_js_1.default.Counter(iv);\n        var aesCtr = new aes_js_1.default.ModeOfOperation.ctr(key, counter);\n        return bytes_1.arrayify(aesCtr.decrypt(ciphertext));\n    }\n    return null;\n}\nfunction _getAccount(data, key) {\n    var ciphertext = utils_1.looseArrayify(utils_1.searchPath(data, \"crypto/ciphertext\"));\n    var computedMAC = bytes_1.hexlify(keccak256_1.keccak256(bytes_1.concat([key.slice(16, 32), ciphertext]))).substring(2);\n    if (computedMAC !== utils_1.searchPath(data, \"crypto/mac\").toLowerCase()) {\n        throw new Error(\"invalid password\");\n    }\n    var privateKey = _decrypt(data, key.slice(0, 16), ciphertext);\n    if (!privateKey) {\n        logger.throwError(\"unsupported cipher\", logger_1.Logger.errors.UNSUPPORTED_OPERATION, {\n            operation: \"decrypt\"\n        });\n    }\n    var mnemonicKey = key.slice(32, 64);\n    var address = transactions_1.computeAddress(privateKey);\n    if (data.address) {\n        var check = data.address.toLowerCase();\n        if (check.substring(0, 2) !== \"0x\") {\n            check = \"0x\" + check;\n        }\n        if (address_1.getAddress(check) !== address) {\n            throw new Error(\"address mismatch\");\n        }\n    }\n    var account = {\n        _isKeystoreAccount: true,\n        address: address,\n        privateKey: bytes_1.hexlify(privateKey)\n    };\n    // Version 0.1 x-ethers metadata must contain an encrypted mnemonic phrase\n    if (utils_1.searchPath(data, \"x-ethers/version\") === \"0.1\") {\n        var mnemonicCiphertext = utils_1.looseArrayify(utils_1.searchPath(data, \"x-ethers/mnemonicCiphertext\"));\n        var mnemonicIv = utils_1.looseArrayify(utils_1.searchPath(data, \"x-ethers/mnemonicCounter\"));\n        var mnemonicCounter = new aes_js_1.default.Counter(mnemonicIv);\n        var mnemonicAesCtr = new aes_js_1.default.ModeOfOperation.ctr(mnemonicKey, mnemonicCounter);\n        var path = utils_1.searchPath(data, \"x-ethers/path\") || hdnode_1.defaultPath;\n        var locale = utils_1.searchPath(data, \"x-ethers/locale\") || \"en\";\n        var entropy = bytes_1.arrayify(mnemonicAesCtr.decrypt(mnemonicCiphertext));\n        try {\n            var mnemonic = hdnode_1.entropyToMnemonic(entropy, locale);\n            var node = hdnode_1.HDNode.fromMnemonic(mnemonic, null, locale).derivePath(path);\n            if (node.privateKey != account.privateKey) {\n                throw new Error(\"mnemonic mismatch\");\n            }\n            account.mnemonic = node.mnemonic;\n        }\n        catch (error) {\n            // If we don't have the locale wordlist installed to\n            // read this mnemonic, just bail and don't set the\n            // mnemonic\n            if (error.code !== logger_1.Logger.errors.INVALID_ARGUMENT || error.argument !== \"wordlist\") {\n                throw error;\n            }\n        }\n    }\n    return new KeystoreAccount(account);\n}\nfunction pbkdf2Sync(passwordBytes, salt, count, dkLen, prfFunc) {\n    return bytes_1.arrayify(pbkdf2_1.pbkdf2(passwordBytes, salt, count, dkLen, prfFunc));\n}\nfunction pbkdf2(passwordBytes, salt, count, dkLen, prfFunc) {\n    return Promise.resolve(pbkdf2Sync(passwordBytes, salt, count, dkLen, prfFunc));\n}\nfunction _computeKdfKey(data, password, pbkdf2Func, scryptFunc, progressCallback) {\n    var passwordBytes = utils_1.getPassword(password);\n    var kdf = utils_1.searchPath(data, \"crypto/kdf\");\n    if (kdf && typeof (kdf) === \"string\") {\n        var throwError = function (name, value) {\n            return logger.throwArgumentError(\"invalid key-derivation function parameters\", name, value);\n        };\n        if (kdf.toLowerCase() === \"scrypt\") {\n            var salt = utils_1.looseArrayify(utils_1.searchPath(data, \"crypto/kdfparams/salt\"));\n            var N = parseInt(utils_1.searchPath(data, \"crypto/kdfparams/n\"));\n            var r = parseInt(utils_1.searchPath(data, \"crypto/kdfparams/r\"));\n            var p = parseInt(utils_1.searchPath(data, \"crypto/kdfparams/p\"));\n            // Check for all required parameters\n            if (!N || !r || !p) {\n                throwError(\"kdf\", kdf);\n            }\n            // Make sure N is a power of 2\n            if ((N & (N - 1)) !== 0) {\n                throwError(\"N\", N);\n            }\n            var dkLen = parseInt(utils_1.searchPath(data, \"crypto/kdfparams/dklen\"));\n            if (dkLen !== 32) {\n                throwError(\"dklen\", dkLen);\n            }\n            return scryptFunc(passwordBytes, salt, N, r, p, 64, progressCallback);\n        }\n        else if (kdf.toLowerCase() === \"pbkdf2\") {\n            var salt = utils_1.looseArrayify(utils_1.searchPath(data, \"crypto/kdfparams/salt\"));\n            var prfFunc = null;\n            var prf = utils_1.searchPath(data, \"crypto/kdfparams/prf\");\n            if (prf === \"hmac-sha256\") {\n                prfFunc = \"sha256\";\n            }\n            else if (prf === \"hmac-sha512\") {\n                prfFunc = \"sha512\";\n            }\n            else {\n                throwError(\"prf\", prf);\n            }\n            var count = parseInt(utils_1.searchPath(data, \"crypto/kdfparams/c\"));\n            var dkLen = parseInt(utils_1.searchPath(data, \"crypto/kdfparams/dklen\"));\n            if (dkLen !== 32) {\n                throwError(\"dklen\", dkLen);\n            }\n            return pbkdf2Func(passwordBytes, salt, count, dkLen, prfFunc);\n        }\n    }\n    return logger.throwArgumentError(\"unsupported key-derivation function\", \"kdf\", kdf);\n}\nfunction decryptSync(json, password) {\n    var data = JSON.parse(json);\n    var key = _computeKdfKey(data, password, pbkdf2Sync, scrypt_js_1.default.syncScrypt);\n    return _getAccount(data, key);\n}\nexports.decryptSync = decryptSync;\nfunction decrypt(json, password, progressCallback) {\n    return __awaiter(this, void 0, void 0, function () {\n        var data, key;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    data = JSON.parse(json);\n                    return [4 /*yield*/, _computeKdfKey(data, password, pbkdf2, scrypt_js_1.default.scrypt, progressCallback)];\n                case 1:\n                    key = _a.sent();\n                    return [2 /*return*/, _getAccount(data, key)];\n            }\n        });\n    });\n}\nexports.decrypt = decrypt;\nfunction encrypt(account, password, options, progressCallback) {\n    try {\n        // Check the address matches the private key\n        if (address_1.getAddress(account.address) !== transactions_1.computeAddress(account.privateKey)) {\n            throw new Error(\"address/privateKey mismatch\");\n        }\n        // Check the mnemonic (if any) matches the private key\n        if (hasMnemonic(account)) {\n            var mnemonic = account.mnemonic;\n            var node = hdnode_1.HDNode.fromMnemonic(mnemonic.phrase, null, mnemonic.locale).derivePath(mnemonic.path || hdnode_1.defaultPath);\n            if (node.privateKey != account.privateKey) {\n                throw new Error(\"mnemonic mismatch\");\n            }\n        }\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n    // The options are optional, so adjust the call as needed\n    if (typeof (options) === \"function\" && !progressCallback) {\n        progressCallback = options;\n        options = {};\n    }\n    if (!options) {\n        options = {};\n    }\n    var privateKey = bytes_1.arrayify(account.privateKey);\n    var passwordBytes = utils_1.getPassword(password);\n    var entropy = null;\n    var path = null;\n    var locale = null;\n    if (hasMnemonic(account)) {\n        var srcMnemonic = account.mnemonic;\n        entropy = bytes_1.arrayify(hdnode_1.mnemonicToEntropy(srcMnemonic.phrase, srcMnemonic.locale || \"en\"));\n        path = srcMnemonic.path || hdnode_1.defaultPath;\n        locale = srcMnemonic.locale || \"en\";\n    }\n    var client = options.client;\n    if (!client) {\n        client = \"ethers.js\";\n    }\n    // Check/generate the salt\n    var salt = null;\n    if (options.salt) {\n        salt = bytes_1.arrayify(options.salt);\n    }\n    else {\n        salt = random_1.randomBytes(32);\n        ;\n    }\n    // Override initialization vector\n    var iv = null;\n    if (options.iv) {\n        iv = bytes_1.arrayify(options.iv);\n        if (iv.length !== 16) {\n            throw new Error(\"invalid iv\");\n        }\n    }\n    else {\n        iv = random_1.randomBytes(16);\n    }\n    // Override the uuid\n    var uuidRandom = null;\n    if (options.uuid) {\n        uuidRandom = bytes_1.arrayify(options.uuid);\n        if (uuidRandom.length !== 16) {\n            throw new Error(\"invalid uuid\");\n        }\n    }\n    else {\n        uuidRandom = random_1.randomBytes(16);\n    }\n    // Override the scrypt password-based key derivation function parameters\n    var N = (1 << 17), r = 8, p = 1;\n    if (options.scrypt) {\n        if (options.scrypt.N) {\n            N = options.scrypt.N;\n        }\n        if (options.scrypt.r) {\n            r = options.scrypt.r;\n        }\n        if (options.scrypt.p) {\n            p = options.scrypt.p;\n        }\n    }\n    // We take 64 bytes:\n    //   - 32 bytes   As normal for the Web3 secret storage (derivedKey, macPrefix)\n    //   - 32 bytes   AES key to encrypt mnemonic with (required here to be Ethers Wallet)\n    return scrypt_js_1.default.scrypt(passwordBytes, salt, N, r, p, 64, progressCallback).then(function (key) {\n        key = bytes_1.arrayify(key);\n        // This will be used to encrypt the wallet (as per Web3 secret storage)\n        var derivedKey = key.slice(0, 16);\n        var macPrefix = key.slice(16, 32);\n        // This will be used to encrypt the mnemonic phrase (if any)\n        var mnemonicKey = key.slice(32, 64);\n        // Encrypt the private key\n        var counter = new aes_js_1.default.Counter(iv);\n        var aesCtr = new aes_js_1.default.ModeOfOperation.ctr(derivedKey, counter);\n        var ciphertext = bytes_1.arrayify(aesCtr.encrypt(privateKey));\n        // Compute the message authentication code, used to check the password\n        var mac = keccak256_1.keccak256(bytes_1.concat([macPrefix, ciphertext]));\n        // See: https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition\n        var data = {\n            address: account.address.substring(2).toLowerCase(),\n            id: utils_1.uuidV4(uuidRandom),\n            version: 3,\n            Crypto: {\n                cipher: \"aes-128-ctr\",\n                cipherparams: {\n                    iv: bytes_1.hexlify(iv).substring(2),\n                },\n                ciphertext: bytes_1.hexlify(ciphertext).substring(2),\n                kdf: \"scrypt\",\n                kdfparams: {\n                    salt: bytes_1.hexlify(salt).substring(2),\n                    n: N,\n                    dklen: 32,\n                    p: p,\n                    r: r\n                },\n                mac: mac.substring(2)\n            }\n        };\n        // If we have a mnemonic, encrypt it into the JSON wallet\n        if (entropy) {\n            var mnemonicIv = random_1.randomBytes(16);\n            var mnemonicCounter = new aes_js_1.default.Counter(mnemonicIv);\n            var mnemonicAesCtr = new aes_js_1.default.ModeOfOperation.ctr(mnemonicKey, mnemonicCounter);\n            var mnemonicCiphertext = bytes_1.arrayify(mnemonicAesCtr.encrypt(entropy));\n            var now = new Date();\n            var timestamp = (now.getUTCFullYear() + \"-\" +\n                utils_1.zpad(now.getUTCMonth() + 1, 2) + \"-\" +\n                utils_1.zpad(now.getUTCDate(), 2) + \"T\" +\n                utils_1.zpad(now.getUTCHours(), 2) + \"-\" +\n                utils_1.zpad(now.getUTCMinutes(), 2) + \"-\" +\n                utils_1.zpad(now.getUTCSeconds(), 2) + \".0Z\");\n            data[\"x-ethers\"] = {\n                client: client,\n                gethFilename: (\"UTC--\" + timestamp + \"--\" + data.address),\n                mnemonicCounter: bytes_1.hexlify(mnemonicIv).substring(2),\n                mnemonicCiphertext: bytes_1.hexlify(mnemonicCiphertext).substring(2),\n                path: path,\n                locale: locale,\n                version: \"0.1\"\n            };\n        }\n        return JSON.stringify(data);\n    });\n}\nexports.encrypt = encrypt;\n//# sourceMappingURL=keystore.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","_getAccount","data","key","ciphertext","utils_1","looseArrayify","searchPath","bytes_1","hexlify","keccak256_1","keccak256","concat","slice","computedMAC","substring","toLowerCase","Error","cipher","iv","counter","aes_js_1","default","Counter","aesCtr","ModeOfOperation","ctr","arrayify","decrypt","privateKey","logger","throwError","logger_1","Logger","errors","UNSUPPORTED_OPERATION","operation","mnemonicKey","address","transactions_1","computeAddress","check","address_1","getAddress","account","_isKeystoreAccount","mnemonicCiphertext","mnemonicIv","mnemonicCounter","mnemonicAesCtr","path","hdnode_1","defaultPath","locale","entropy","mnemonic","entropyToMnemonic","node","HDNode","fromMnemonic","derivePath","error","code","INVALID_ARGUMENT","argument","KeystoreAccount","pbkdf2Sync","passwordBytes","salt","count","dkLen","prfFunc","pbkdf2_1","pbkdf2","Promise","resolve","_computeKdfKey","password","pbkdf2Func","scryptFunc","progressCallback","getPassword","kdf","name","value","throwArgumentError","N","parseInt","r","p","prf","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","__","constructor","TypeError","String","create","__awaiter","thisArg","_arguments","P","generator","adopt","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","_","y","t","label","ops","pop","trys","length","push","sent","g","Symbol","iterator","__importDefault","mod","__esModule","defineProperty","encrypt","decryptSync","scrypt_js_1","random_1","properties_1","_version_1","version","_super","arguments","isKeystoreAccount","KeystoreAccount.prototype.isKeystoreAccount","Description","json","JSON","parse","syncScrypt","_a","scrypt","options","phrase","srcMnemonic","mnemonicToEntropy","client","randomBytes","uuidRandom","uuid","derivedKey","macPrefix","mac","id","uuidV4","Crypto","cipherparams","kdfparams","dklen","now","Date","timestamp","getUTCFullYear","zpad","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","gethFilename","stringify"]
}
