{
"version":3,
"file":"module$node_modules$$ethersproject$providers$lib$fallback_provider.js",
"lineCount":32,
"mappings":"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",
"sources":["node_modules/@ethersproject/providers/lib/fallback-provider.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$ethersproject$providers$lib$fallback_provider\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FallbackProvider = void 0;\nvar abstract_provider_1 = require(\"@ethersproject/abstract-provider\");\nvar bignumber_1 = require(\"@ethersproject/bignumber\");\nvar bytes_1 = require(\"@ethersproject/bytes\");\nvar properties_1 = require(\"@ethersproject/properties\");\nvar random_1 = require(\"@ethersproject/random\");\nvar web_1 = require(\"@ethersproject/web\");\nvar base_provider_1 = require(\"./base-provider\");\nvar formatter_1 = require(\"./formatter\");\nvar logger_1 = require(\"@ethersproject/logger\");\nvar _version_1 = require(\"./_version\");\nvar logger = new logger_1.Logger(_version_1.version);\nfunction now() { return (new Date()).getTime(); }\n// Returns to network as long as all agree, or null if any is null.\n// Throws an error if any two networks do not match.\nfunction checkNetworks(networks) {\n    var result = null;\n    for (var i = 0; i < networks.length; i++) {\n        var network = networks[i];\n        // Null! We do not know our network; bail.\n        if (network == null) {\n            return null;\n        }\n        if (result) {\n            // Make sure the network matches the previous networks\n            if (!(result.name === network.name && result.chainId === network.chainId &&\n                ((result.ensAddress === network.ensAddress) || (result.ensAddress == null && network.ensAddress == null)))) {\n                logger.throwArgumentError(\"provider mismatch\", \"networks\", networks);\n            }\n        }\n        else {\n            result = network;\n        }\n    }\n    return result;\n}\nfunction median(values, maxDelta) {\n    values = values.slice().sort();\n    var middle = Math.floor(values.length / 2);\n    // Odd length; take the middle\n    if (values.length % 2) {\n        return values[middle];\n    }\n    // Even length; take the average of the two middle\n    var a = values[middle - 1], b = values[middle];\n    if (maxDelta != null && Math.abs(a - b) > maxDelta) {\n        return null;\n    }\n    return (a + b) / 2;\n}\nfunction serialize(value) {\n    if (value === null) {\n        return \"null\";\n    }\n    else if (typeof (value) === \"number\" || typeof (value) === \"boolean\") {\n        return JSON.stringify(value);\n    }\n    else if (typeof (value) === \"string\") {\n        return value;\n    }\n    else if (bignumber_1.BigNumber.isBigNumber(value)) {\n        return value.toString();\n    }\n    else if (Array.isArray(value)) {\n        return JSON.stringify(value.map(function (i) { return serialize(i); }));\n    }\n    else if (typeof (value) === \"object\") {\n        var keys = Object.keys(value);\n        keys.sort();\n        return \"{\" + keys.map(function (key) {\n            var v = value[key];\n            if (typeof (v) === \"function\") {\n                v = \"[function]\";\n            }\n            else {\n                v = serialize(v);\n            }\n            return JSON.stringify(key) + \":\" + v;\n        }).join(\",\") + \"}\";\n    }\n    throw new Error(\"unknown value type: \" + typeof (value));\n}\n// Next request ID to use for emitting debug info\nvar nextRid = 1;\n;\nfunction stall(duration) {\n    var cancel = null;\n    var timer = null;\n    var promise = (new Promise(function (resolve) {\n        cancel = function () {\n            if (timer) {\n                clearTimeout(timer);\n                timer = null;\n            }\n            resolve();\n        };\n        timer = setTimeout(cancel, duration);\n    }));\n    var wait = function (func) {\n        promise = promise.then(func);\n        return promise;\n    };\n    function getPromise() {\n        return promise;\n    }\n    return { cancel: cancel, getPromise: getPromise, wait: wait };\n}\nvar ForwardErrors = [\n    logger_1.Logger.errors.CALL_EXCEPTION,\n    logger_1.Logger.errors.INSUFFICIENT_FUNDS,\n    logger_1.Logger.errors.NONCE_EXPIRED,\n    logger_1.Logger.errors.REPLACEMENT_UNDERPRICED,\n    logger_1.Logger.errors.UNPREDICTABLE_GAS_LIMIT\n];\nvar ForwardProperties = [\n    \"address\",\n    \"args\",\n    \"errorArgs\",\n    \"errorSignature\",\n    \"method\",\n    \"transaction\",\n];\n;\nfunction exposeDebugConfig(config, now) {\n    var result = {\n        weight: config.weight\n    };\n    Object.defineProperty(result, \"provider\", { get: function () { return config.provider; } });\n    if (config.start) {\n        result.start = config.start;\n    }\n    if (now) {\n        result.duration = (now - config.start);\n    }\n    if (config.done) {\n        if (config.error) {\n            result.error = config.error;\n        }\n        else {\n            result.result = config.result || null;\n        }\n    }\n    return result;\n}\nfunction normalizedTally(normalize, quorum) {\n    return function (configs) {\n        // Count the votes for each result\n        var tally = {};\n        configs.forEach(function (c) {\n            var value = normalize(c.result);\n            if (!tally[value]) {\n                tally[value] = { count: 0, result: c.result };\n            }\n            tally[value].count++;\n        });\n        // Check for a quorum on any given result\n        var keys = Object.keys(tally);\n        for (var i = 0; i < keys.length; i++) {\n            var check = tally[keys[i]];\n            if (check.count >= quorum) {\n                return check.result;\n            }\n        }\n        // No quroum\n        return undefined;\n    };\n}\nfunction getProcessFunc(provider, method, params) {\n    var normalize = serialize;\n    switch (method) {\n        case \"getBlockNumber\":\n            // Return the median value, unless there is (median + 1) is also\n            // present, in which case that is probably true and the median\n            // is going to be stale soon. In the event of a malicious node,\n            // the lie will be true soon enough.\n            return function (configs) {\n                var values = configs.map(function (c) { return c.result; });\n                // Get the median block number\n                var blockNumber = median(configs.map(function (c) { return c.result; }), 2);\n                if (blockNumber == null) {\n                    return undefined;\n                }\n                blockNumber = Math.ceil(blockNumber);\n                // If the next block height is present, its prolly safe to use\n                if (values.indexOf(blockNumber + 1) >= 0) {\n                    blockNumber++;\n                }\n                // Don't ever roll back the blockNumber\n                if (blockNumber >= provider._highestBlockNumber) {\n                    provider._highestBlockNumber = blockNumber;\n                }\n                return provider._highestBlockNumber;\n            };\n        case \"getGasPrice\":\n            // Return the middle (round index up) value, similar to median\n            // but do not average even entries and choose the higher.\n            // Malicious actors must compromise 50% of the nodes to lie.\n            return function (configs) {\n                var values = configs.map(function (c) { return c.result; });\n                values.sort();\n                return values[Math.floor(values.length / 2)];\n            };\n        case \"getEtherPrice\":\n            // Returns the median price. Malicious actors must compromise at\n            // least 50% of the nodes to lie (in a meaningful way).\n            return function (configs) {\n                return median(configs.map(function (c) { return c.result; }));\n            };\n        // No additional normalizing required; serialize is enough\n        case \"getBalance\":\n        case \"getTransactionCount\":\n        case \"getCode\":\n        case \"getStorageAt\":\n        case \"call\":\n        case \"estimateGas\":\n        case \"getLogs\":\n            break;\n        // We drop the confirmations from transactions as it is approximate\n        case \"getTransaction\":\n        case \"getTransactionReceipt\":\n            normalize = function (tx) {\n                if (tx == null) {\n                    return null;\n                }\n                tx = properties_1.shallowCopy(tx);\n                tx.confirmations = -1;\n                return serialize(tx);\n            };\n            break;\n        // We drop the confirmations from transactions as it is approximate\n        case \"getBlock\":\n            // We drop the confirmations from transactions as it is approximate\n            if (params.includeTransactions) {\n                normalize = function (block) {\n                    if (block == null) {\n                        return null;\n                    }\n                    block = properties_1.shallowCopy(block);\n                    block.transactions = block.transactions.map(function (tx) {\n                        tx = properties_1.shallowCopy(tx);\n                        tx.confirmations = -1;\n                        return tx;\n                    });\n                    return serialize(block);\n                };\n            }\n            else {\n                normalize = function (block) {\n                    if (block == null) {\n                        return null;\n                    }\n                    return serialize(block);\n                };\n            }\n            break;\n        default:\n            throw new Error(\"unknown method: \" + method);\n    }\n    // Return the result if and only if the expected quorum is\n    // satisfied and agreed upon for the final result.\n    return normalizedTally(normalize, provider.quorum);\n}\n// If we are doing a blockTag query, we need to make sure the backend is\n// caught up to the FallbackProvider, before sending a request to it.\nfunction waitForSync(config, blockNumber) {\n    return __awaiter(this, void 0, void 0, function () {\n        var provider;\n        return __generator(this, function (_a) {\n            provider = (config.provider);\n            if ((provider.blockNumber != null && provider.blockNumber >= blockNumber) || blockNumber === -1) {\n                return [2 /*return*/, provider];\n            }\n            return [2 /*return*/, web_1.poll(function () {\n                    return new Promise(function (resolve, reject) {\n                        setTimeout(function () {\n                            // We are synced\n                            if (provider.blockNumber >= blockNumber) {\n                                return resolve(provider);\n                            }\n                            // We're done; just quit\n                            if (config.cancelled) {\n                                return resolve(null);\n                            }\n                            // Try again, next block\n                            return resolve(undefined);\n                        }, 0);\n                    });\n                }, { oncePoll: provider })];\n        });\n    });\n}\nfunction getRunner(config, currentBlockNumber, method, params) {\n    return __awaiter(this, void 0, void 0, function () {\n        var provider, _a, filter;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    provider = config.provider;\n                    _a = method;\n                    switch (_a) {\n                        case \"getBlockNumber\": return [3 /*break*/, 1];\n                        case \"getGasPrice\": return [3 /*break*/, 1];\n                        case \"getEtherPrice\": return [3 /*break*/, 2];\n                        case \"getBalance\": return [3 /*break*/, 3];\n                        case \"getTransactionCount\": return [3 /*break*/, 3];\n                        case \"getCode\": return [3 /*break*/, 3];\n                        case \"getStorageAt\": return [3 /*break*/, 6];\n                        case \"getBlock\": return [3 /*break*/, 9];\n                        case \"call\": return [3 /*break*/, 12];\n                        case \"estimateGas\": return [3 /*break*/, 12];\n                        case \"getTransaction\": return [3 /*break*/, 15];\n                        case \"getTransactionReceipt\": return [3 /*break*/, 15];\n                        case \"getLogs\": return [3 /*break*/, 16];\n                    }\n                    return [3 /*break*/, 19];\n                case 1: return [2 /*return*/, provider[method]()];\n                case 2:\n                    if (provider.getEtherPrice) {\n                        return [2 /*return*/, provider.getEtherPrice()];\n                    }\n                    return [3 /*break*/, 19];\n                case 3:\n                    if (!(params.blockTag && bytes_1.isHexString(params.blockTag))) return [3 /*break*/, 5];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 4:\n                    provider = _b.sent();\n                    _b.label = 5;\n                case 5: return [2 /*return*/, provider[method](params.address, params.blockTag || \"latest\")];\n                case 6:\n                    if (!(params.blockTag && bytes_1.isHexString(params.blockTag))) return [3 /*break*/, 8];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 7:\n                    provider = _b.sent();\n                    _b.label = 8;\n                case 8: return [2 /*return*/, provider.getStorageAt(params.address, params.position, params.blockTag || \"latest\")];\n                case 9:\n                    if (!(params.blockTag && bytes_1.isHexString(params.blockTag))) return [3 /*break*/, 11];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 10:\n                    provider = _b.sent();\n                    _b.label = 11;\n                case 11: return [2 /*return*/, provider[(params.includeTransactions ? \"getBlockWithTransactions\" : \"getBlock\")](params.blockTag || params.blockHash)];\n                case 12:\n                    if (!(params.blockTag && bytes_1.isHexString(params.blockTag))) return [3 /*break*/, 14];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 13:\n                    provider = _b.sent();\n                    _b.label = 14;\n                case 14: return [2 /*return*/, provider[method](params.transaction)];\n                case 15: return [2 /*return*/, provider[method](params.transactionHash)];\n                case 16:\n                    filter = params.filter;\n                    if (!((filter.fromBlock && bytes_1.isHexString(filter.fromBlock)) || (filter.toBlock && bytes_1.isHexString(filter.toBlock)))) return [3 /*break*/, 18];\n                    return [4 /*yield*/, waitForSync(config, currentBlockNumber)];\n                case 17:\n                    provider = _b.sent();\n                    _b.label = 18;\n                case 18: return [2 /*return*/, provider.getLogs(filter)];\n                case 19: return [2 /*return*/, logger.throwError(\"unknown method error\", logger_1.Logger.errors.UNKNOWN_ERROR, {\n                        method: method,\n                        params: params\n                    })];\n            }\n        });\n    });\n}\nvar FallbackProvider = /** @class */ (function (_super) {\n    __extends(FallbackProvider, _super);\n    function FallbackProvider(providers, quorum) {\n        var _newTarget = this.constructor;\n        var _this = this;\n        logger.checkNew(_newTarget, FallbackProvider);\n        if (providers.length === 0) {\n            logger.throwArgumentError(\"missing providers\", \"providers\", providers);\n        }\n        var providerConfigs = providers.map(function (configOrProvider, index) {\n            if (abstract_provider_1.Provider.isProvider(configOrProvider)) {\n                var stallTimeout = formatter_1.isCommunityResource(configOrProvider) ? 2000 : 750;\n                var priority = 1;\n                return Object.freeze({ provider: configOrProvider, weight: 1, stallTimeout: stallTimeout, priority: priority });\n            }\n            var config = properties_1.shallowCopy(configOrProvider);\n            if (config.priority == null) {\n                config.priority = 1;\n            }\n            if (config.stallTimeout == null) {\n                config.stallTimeout = formatter_1.isCommunityResource(configOrProvider) ? 2000 : 750;\n            }\n            if (config.weight == null) {\n                config.weight = 1;\n            }\n            var weight = config.weight;\n            if (weight % 1 || weight > 512 || weight < 1) {\n                logger.throwArgumentError(\"invalid weight; must be integer in [1, 512]\", \"providers[\" + index + \"].weight\", weight);\n            }\n            return Object.freeze(config);\n        });\n        var total = providerConfigs.reduce(function (accum, c) { return (accum + c.weight); }, 0);\n        if (quorum == null) {\n            quorum = total / 2;\n        }\n        else if (quorum > total) {\n            logger.throwArgumentError(\"quorum will always fail; larger than total weight\", \"quorum\", quorum);\n        }\n        // Are all providers' networks are known\n        var networkOrReady = checkNetworks(providerConfigs.map(function (c) { return (c.provider).network; }));\n        // Not all networks are known; we must stall\n        if (networkOrReady == null) {\n            networkOrReady = new Promise(function (resolve, reject) {\n                setTimeout(function () {\n                    _this.detectNetwork().then(resolve, reject);\n                }, 0);\n            });\n        }\n        _this = _super.call(this, networkOrReady) || this;\n        // Preserve a copy, so we do not get mutated\n        properties_1.defineReadOnly(_this, \"providerConfigs\", Object.freeze(providerConfigs));\n        properties_1.defineReadOnly(_this, \"quorum\", quorum);\n        _this._highestBlockNumber = -1;\n        return _this;\n    }\n    FallbackProvider.prototype.detectNetwork = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var networks;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Promise.all(this.providerConfigs.map(function (c) { return c.provider.getNetwork(); }))];\n                    case 1:\n                        networks = _a.sent();\n                        return [2 /*return*/, checkNetworks(networks)];\n                }\n            });\n        });\n    };\n    FallbackProvider.prototype.perform = function (method, params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var results, i_1, result, processFunc, configs, currentBlockNumber, i, first, _loop_1, this_1, state_1;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(method === \"sendTransaction\")) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.all(this.providerConfigs.map(function (c) {\n                                return c.provider.sendTransaction(params.signedTransaction).then(function (result) {\n                                    return result.hash;\n                                }, function (error) {\n                                    return error;\n                                });\n                            }))];\n                    case 1:\n                        results = _a.sent();\n                        // Any success is good enough (other errors are likely \"already seen\" errors\n                        for (i_1 = 0; i_1 < results.length; i_1++) {\n                            result = results[i_1];\n                            if (typeof (result) === \"string\") {\n                                return [2 /*return*/, result];\n                            }\n                        }\n                        // They were all an error; pick the first error\n                        throw results[0];\n                    case 2:\n                        if (!(this._highestBlockNumber === -1 && method !== \"getBlockNumber\")) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.getBlockNumber()];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        processFunc = getProcessFunc(this, method, params);\n                        configs = random_1.shuffled(this.providerConfigs.map(properties_1.shallowCopy));\n                        configs.sort(function (a, b) { return (a.priority - b.priority); });\n                        currentBlockNumber = this._highestBlockNumber;\n                        i = 0;\n                        first = true;\n                        _loop_1 = function () {\n                            var t0, inflightWeight, _loop_2, waiting, results, result, errors;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        t0 = now();\n                                        inflightWeight = configs.filter(function (c) { return (c.runner && ((t0 - c.start) < c.stallTimeout)); })\n                                            .reduce(function (accum, c) { return (accum + c.weight); }, 0);\n                                        _loop_2 = function () {\n                                            var config = configs[i++];\n                                            var rid = nextRid++;\n                                            config.start = now();\n                                            config.staller = stall(config.stallTimeout);\n                                            config.staller.wait(function () { config.staller = null; });\n                                            config.runner = getRunner(config, currentBlockNumber, method, params).then(function (result) {\n                                                config.done = true;\n                                                config.result = result;\n                                                if (_this.listenerCount(\"debug\")) {\n                                                    _this.emit(\"debug\", {\n                                                        action: \"request\",\n                                                        rid: rid,\n                                                        backend: exposeDebugConfig(config, now()),\n                                                        request: { method: method, params: properties_1.deepCopy(params) },\n                                                        provider: _this\n                                                    });\n                                                }\n                                            }, function (error) {\n                                                config.done = true;\n                                                config.error = error;\n                                                if (_this.listenerCount(\"debug\")) {\n                                                    _this.emit(\"debug\", {\n                                                        action: \"request\",\n                                                        rid: rid,\n                                                        backend: exposeDebugConfig(config, now()),\n                                                        request: { method: method, params: properties_1.deepCopy(params) },\n                                                        provider: _this\n                                                    });\n                                                }\n                                            });\n                                            if (this_1.listenerCount(\"debug\")) {\n                                                this_1.emit(\"debug\", {\n                                                    action: \"request\",\n                                                    rid: rid,\n                                                    backend: exposeDebugConfig(config, null),\n                                                    request: { method: method, params: properties_1.deepCopy(params) },\n                                                    provider: this_1\n                                                });\n                                            }\n                                            inflightWeight += config.weight;\n                                        };\n                                        // Start running enough to meet quorum\n                                        while (inflightWeight < this_1.quorum && i < configs.length) {\n                                            _loop_2();\n                                        }\n                                        waiting = [];\n                                        configs.forEach(function (c) {\n                                            if (c.done || !c.runner) {\n                                                return;\n                                            }\n                                            waiting.push(c.runner);\n                                            if (c.staller) {\n                                                waiting.push(c.staller.getPromise());\n                                            }\n                                        });\n                                        if (!waiting.length) return [3 /*break*/, 2];\n                                        return [4 /*yield*/, Promise.race(waiting)];\n                                    case 1:\n                                        _b.sent();\n                                        _b.label = 2;\n                                    case 2:\n                                        results = configs.filter(function (c) { return (c.done && c.error == null); });\n                                        if (!(results.length >= this_1.quorum)) return [3 /*break*/, 5];\n                                        result = processFunc(results);\n                                        if (result !== undefined) {\n                                            // Shut down any stallers\n                                            configs.forEach(function (c) {\n                                                if (c.staller) {\n                                                    c.staller.cancel();\n                                                }\n                                                c.cancelled = true;\n                                            });\n                                            return [2 /*return*/, { value: result }];\n                                        }\n                                        if (!!first) return [3 /*break*/, 4];\n                                        return [4 /*yield*/, stall(100).getPromise()];\n                                    case 3:\n                                        _b.sent();\n                                        _b.label = 4;\n                                    case 4:\n                                        first = false;\n                                        _b.label = 5;\n                                    case 5:\n                                        errors = configs.reduce(function (accum, c) {\n                                            if (!c.done || c.error == null) {\n                                                return accum;\n                                            }\n                                            var code = (c.error).code;\n                                            if (ForwardErrors.indexOf(code) >= 0) {\n                                                if (!accum[code]) {\n                                                    accum[code] = { error: c.error, weight: 0 };\n                                                }\n                                                accum[code].weight += c.weight;\n                                            }\n                                            return accum;\n                                        }, ({}));\n                                        Object.keys(errors).forEach(function (errorCode) {\n                                            var tally = errors[errorCode];\n                                            if (tally.weight < _this.quorum) {\n                                                return;\n                                            }\n                                            // Shut down any stallers\n                                            configs.forEach(function (c) {\n                                                if (c.staller) {\n                                                    c.staller.cancel();\n                                                }\n                                                c.cancelled = true;\n                                            });\n                                            var e = (tally.error);\n                                            var props = {};\n                                            ForwardProperties.forEach(function (name) {\n                                                if (e[name] == null) {\n                                                    return;\n                                                }\n                                                props[name] = e[name];\n                                            });\n                                            logger.throwError(e.reason || e.message, errorCode, props);\n                                        });\n                                        // All configs have run to completion; we will never get more data\n                                        if (configs.filter(function (c) { return !c.done; }).length === 0) {\n                                            return [2 /*return*/, \"break\"];\n                                        }\n                                        return [2 /*return*/];\n                                }\n                            });\n                        };\n                        this_1 = this;\n                        _a.label = 5;\n                    case 5:\n                        if (!true) return [3 /*break*/, 7];\n                        return [5 /*yield**/, _loop_1()];\n                    case 6:\n                        state_1 = _a.sent();\n                        if (typeof state_1 === \"object\")\n                            return [2 /*return*/, state_1.value];\n                        if (state_1 === \"break\")\n                            return [3 /*break*/, 7];\n                        return [3 /*break*/, 5];\n                    case 7:\n                        // Shut down any stallers; shouldn't be any\n                        configs.forEach(function (c) {\n                            if (c.staller) {\n                                c.staller.cancel();\n                            }\n                            c.cancelled = true;\n                        });\n                        return [2 /*return*/, logger.throwError(\"failed to meet quorum\", logger_1.Logger.errors.SERVER_ERROR, {\n                                method: method,\n                                params: params,\n                                //results: configs.map((c) => c.result),\n                                //errors: configs.map((c) => c.error),\n                                results: configs.map(function (c) { return exposeDebugConfig(c); }),\n                                provider: this\n                            })];\n                }\n            });\n        });\n    };\n    return FallbackProvider;\n}(base_provider_1.BaseProvider));\nexports.FallbackProvider = FallbackProvider;\n//# sourceMappingURL=fallback-provider.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","checkNetworks","networks","result","i","length","network","name","chainId","ensAddress","logger","throwArgumentError","median","values","maxDelta","slice","sort","middle","Math","floor","a","b","abs","serialize","value","JSON","stringify","bignumber_1","BigNumber","isBigNumber","toString","Array","isArray","map","keys","Object","key","v","join","Error","stall","duration","cancel","timer","promise","Promise","resolve","clearTimeout","setTimeout","getPromise","wait","func","then","exposeDebugConfig","config","now","weight","defineProperty","get","provider","start","done","error","normalizedTally","normalize","quorum","configs","tally","forEach","c","count","check","getProcessFunc","method","params","blockNumber","_highestBlockNumber","ceil","indexOf","tx","properties_1","shallowCopy","confirmations","includeTransactions","block","transactions","waitForSync","__awaiter","__generator","_a","web_1","poll","reject","cancelled","undefined","oncePoll","getRunner","currentBlockNumber","filter","_b","label","getEtherPrice","blockTag","bytes_1","isHexString","sent","address","getStorageAt","position","blockHash","transaction","transactionHash","fromBlock","toBlock","getLogs","throwError","logger_1","Logger","errors","UNKNOWN_ERROR","__extends","extendStatics","d","setPrototypeOf","__proto__","p","prototype","hasOwnProperty","call","__","constructor","TypeError","String","create","thisArg","_arguments","P","generator","adopt","fulfilled","step","next","e","rejected","apply","body","verb","n","op","f","_","y","t","ops","pop","trys","push","g","Symbol","iterator","FallbackProvider","abstract_provider_1","random_1","base_provider_1","formatter_1","_version_1","version","nextRid","ForwardErrors","CALL_EXCEPTION","INSUFFICIENT_FUNDS","NONCE_EXPIRED","REPLACEMENT_UNDERPRICED","UNPREDICTABLE_GAS_LIMIT","ForwardProperties","_super","providers","_this","checkNew","providerConfigs","configOrProvider","index","Provider","isProvider","stallTimeout","isCommunityResource","freeze","priority","total","reduce","accum","networkOrReady","detectNetwork","defineReadOnly","FallbackProvider.prototype.detectNetwork","all","getNetwork","perform","FallbackProvider.prototype.perform","results","i_1","processFunc","first","_loop_1","this_1","state_1","sendTransaction","signedTransaction","hash","getBlockNumber","shuffled","t0","inflightWeight","_loop_2","waiting","Date","getTime","runner","rid","staller","listenerCount","emit","action","backend","request","deepCopy","race","code","errorCode","props","reason","message","SERVER_ERROR","BaseProvider"]
}
