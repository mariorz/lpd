{
"version":3,
"file":"module$node_modules$ws$lib$Receiver.js",
"lineCount":15,
"mappings":"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",
"sources":["node_modules/ws/lib/Receiver.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ws$lib$Receiver\"] = function(global,require,module,exports) {\n/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nconst safeBuffer = require('safe-buffer');\n\nconst PerMessageDeflate = require('./PerMessageDeflate');\nconst isValidUTF8 = require('./Validation');\nconst bufferUtil = require('./BufferUtil');\nconst ErrorCodes = require('./ErrorCodes');\nconst constants = require('./Constants');\n\nconst Buffer = safeBuffer.Buffer;\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n */\nclass Receiver {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} extensions An object containing the negotiated extensions\n   * @param {Number} maxPayload The maximum allowed message length\n   * @param {String} binaryType The type for binary data\n   */\n  constructor (extensions, maxPayload, binaryType) {\n    this._binaryType = binaryType || constants.BINARY_TYPES[0];\n    this._extensions = extensions || {};\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._mask = null;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._cleanupCallback = null;\n    this._hadError = false;\n    this._dead = false;\n    this._loop = false;\n\n    this.onmessage = null;\n    this.onclose = null;\n    this.onerror = null;\n    this.onping = null;\n    this.onpong = null;\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Consumes bytes from the available buffered data.\n   *\n   * @param {Number} bytes The number of bytes to consume\n   * @return {Buffer} Consumed bytes\n   * @private\n   */\n  readBuffer (bytes) {\n    var offset = 0;\n    var dst;\n    var l;\n\n    this._bufferedBytes -= bytes;\n\n    if (bytes === this._buffers[0].length) return this._buffers.shift();\n\n    if (bytes < this._buffers[0].length) {\n      dst = this._buffers[0].slice(0, bytes);\n      this._buffers[0] = this._buffers[0].slice(bytes);\n      return dst;\n    }\n\n    dst = Buffer.allocUnsafe(bytes);\n\n    while (bytes > 0) {\n      l = this._buffers[0].length;\n\n      if (bytes >= l) {\n        this._buffers[0].copy(dst, offset);\n        offset += l;\n        this._buffers.shift();\n      } else {\n        this._buffers[0].copy(dst, offset, 0, bytes);\n        this._buffers[0] = this._buffers[0].slice(bytes);\n      }\n\n      bytes -= l;\n    }\n\n    return dst;\n  }\n\n  /**\n   * Checks if the number of buffered bytes is bigger or equal than `n` and\n   * calls `cleanup` if necessary.\n   *\n   * @param {Number} n The number of bytes to check against\n   * @return {Boolean} `true` if `bufferedBytes >= n`, else `false`\n   * @private\n   */\n  hasBufferedBytes (n) {\n    if (this._bufferedBytes >= n) return true;\n\n    this._loop = false;\n    if (this._dead) this.cleanup(this._cleanupCallback);\n    return false;\n  }\n\n  /**\n   * Adds new data to the parser.\n   *\n   * @public\n   */\n  add (data) {\n    if (this._dead) return;\n\n    this._bufferedBytes += data.length;\n    this._buffers.push(data);\n    this.startLoop();\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @private\n   */\n  startLoop () {\n    this._loop = true;\n\n    while (this._loop) {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData();\n          break;\n        default: // `INFLATING`\n          this._loop = false;\n      }\n    }\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @private\n   */\n  getInfo () {\n    if (!this.hasBufferedBytes(2)) return;\n\n    const buf = this.readBuffer(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this.error(new Error('RSV2 and RSV3 must be clear'), 1002);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this.error(new Error('RSV1 must be clear'), 1002);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this.error(new Error('RSV1 must be clear'), 1002);\n        return;\n      }\n\n      if (!this._fragmented) {\n        this.error(new Error(`invalid opcode: ${this._opcode}`), 1002);\n        return;\n      } else {\n        this._opcode = this._fragmented;\n      }\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this.error(new Error(`invalid opcode: ${this._opcode}`), 1002);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this.error(new Error('FIN must be set'), 1002);\n        return;\n      }\n\n      if (compressed) {\n        this.error(new Error('RSV1 must be clear'), 1002);\n        return;\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this.error(new Error('invalid payload length'), 1002);\n        return;\n      }\n    } else {\n      this.error(new Error(`invalid opcode: ${this._opcode}`), 1002);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @private\n   */\n  getPayloadLength16 () {\n    if (!this.hasBufferedBytes(2)) return;\n\n    this._payloadLength = this.readBuffer(2).readUInt16BE(0, true);\n    this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @private\n   */\n  getPayloadLength64 () {\n    if (!this.hasBufferedBytes(8)) return;\n\n    const buf = this.readBuffer(8);\n    const num = buf.readUInt32BE(0, true);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this.error(new Error('max payload size exceeded'), 1009);\n      return;\n    }\n\n    this._payloadLength = (num * Math.pow(2, 32)) + buf.readUInt32BE(4, true);\n    this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @private\n   */\n  haveLength () {\n    if (this._opcode < 0x08 && this.maxPayloadExceeded(this._payloadLength)) {\n      return;\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask () {\n    if (!this.hasBufferedBytes(4)) return;\n\n    this._mask = this.readBuffer(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @private\n   */\n  getData () {\n    var data = constants.EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (!this.hasBufferedBytes(this._payloadLength)) return;\n\n      data = this.readBuffer(this._payloadLength);\n      if (this._masked) bufferUtil.unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data);\n    } else if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data);\n    } else if (this.pushFragment(data)) {\n      this.dataMessage();\n    }\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @private\n   */\n  decompress (data) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) {\n        this.error(err, err.closeCode === 1009 ? 1009 : 1007);\n        return;\n      }\n\n      if (this.pushFragment(buf)) this.dataMessage();\n      this.startLoop();\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @private\n   */\n  dataMessage () {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        var data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = toBuffer(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(toBuffer(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.onmessage(data);\n      } else {\n        const buf = toBuffer(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this.error(new Error('invalid utf8 sequence'), 1007);\n          return;\n        }\n\n        this.onmessage(buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @private\n   */\n  controlMessage (data) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this.onclose(1000, '');\n        this._loop = false;\n        this.cleanup(this._cleanupCallback);\n      } else if (data.length === 1) {\n        this.error(new Error('invalid payload length'), 1002);\n      } else {\n        const code = data.readUInt16BE(0, true);\n\n        if (!ErrorCodes.isValidErrorCode(code)) {\n          this.error(new Error(`invalid status code: ${code}`), 1002);\n          return;\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          this.error(new Error('invalid utf8 sequence'), 1007);\n          return;\n        }\n\n        this.onclose(code, buf.toString());\n        this._loop = false;\n        this.cleanup(this._cleanupCallback);\n      }\n\n      return;\n    }\n\n    if (this._opcode === 0x09) this.onping(data);\n    else this.onpong(data);\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles an error.\n   *\n   * @param {Error} err The error\n   * @param {Number} code Close code\n   * @private\n   */\n  error (err, code) {\n    this.onerror(err, code);\n    this._hadError = true;\n    this._loop = false;\n    this.cleanup(this._cleanupCallback);\n  }\n\n  /**\n   * Checks payload size, disconnects socket when it exceeds `maxPayload`.\n   *\n   * @param {Number} length Payload length\n   * @private\n   */\n  maxPayloadExceeded (length) {\n    if (length === 0 || this._maxPayload < 1) return false;\n\n    const fullLength = this._totalPayloadLength + length;\n\n    if (fullLength <= this._maxPayload) {\n      this._totalPayloadLength = fullLength;\n      return false;\n    }\n\n    this.error(new Error('max payload size exceeded'), 1009);\n    return true;\n  }\n\n  /**\n   * Appends a fragment in the fragments array after checking that the sum of\n   * fragment lengths does not exceed `maxPayload`.\n   *\n   * @param {Buffer} fragment The fragment to add\n   * @return {Boolean} `true` if `maxPayload` is not exceeded, else `false`\n   * @private\n   */\n  pushFragment (fragment) {\n    if (fragment.length === 0) return true;\n\n    const totalLength = this._messageLength + fragment.length;\n\n    if (this._maxPayload < 1 || totalLength <= this._maxPayload) {\n      this._messageLength = totalLength;\n      this._fragments.push(fragment);\n      return true;\n    }\n\n    this.error(new Error('max payload size exceeded'), 1009);\n    return false;\n  }\n\n  /**\n   * Releases resources used by the receiver.\n   *\n   * @param {Function} cb Callback\n   * @public\n   */\n  cleanup (cb) {\n    this._dead = true;\n\n    if (!this._hadError && (this._loop || this._state === INFLATING)) {\n      this._cleanupCallback = cb;\n    } else {\n      this._extensions = null;\n      this._fragments = null;\n      this._buffers = null;\n      this._mask = null;\n\n      this._cleanupCallback = null;\n      this.onmessage = null;\n      this.onclose = null;\n      this.onerror = null;\n      this.onping = null;\n      this.onpong = null;\n\n      if (cb) cb();\n    }\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Makes a buffer from a list of fragments.\n *\n * @param {Buffer[]} fragments The list of fragments composing the message\n * @param {Number} messageLength The length of the message\n * @return {Buffer}\n * @private\n */\nfunction toBuffer (fragments, messageLength) {\n  if (fragments.length === 1) return fragments[0];\n  if (fragments.length > 1) return bufferUtil.concat(fragments, messageLength);\n  return constants.EMPTY_BUFFER;\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n */\nfunction toArrayBuffer (buf) {\n  if (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","toBuffer","fragments","messageLength","length","bufferUtil","concat","constants","EMPTY_BUFFER","safeBuffer","PerMessageDeflate","isValidUTF8","ErrorCodes","Buffer","Receiver","constructor","extensions","maxPayload","binaryType","_binaryType","BINARY_TYPES","_extensions","_maxPayload","_bufferedBytes","_buffers","_compressed","_fragmented","_payloadLength","_fin","_masked","_mask","_messageLength","_totalPayloadLength","_opcode","_fragments","_cleanupCallback","_loop","_dead","_hadError","onpong","onping","onerror","onclose","onmessage","_state","GET_INFO","readBuffer","bytes","offset","shift","dst","slice","allocUnsafe","l","copy","hasBufferedBytes","n","cleanup","add","data","push","startLoop","getInfo","GET_PAYLOAD_LENGTH_16","getPayloadLength16","GET_PAYLOAD_LENGTH_64","getPayloadLength64","GET_MASK","getMask","GET_DATA","getData","buf","error","Error","compressed","extensionName","haveLength","readUInt16BE","num","readUInt32BE","Math","pow","maxPayloadExceeded","unmask","controlMessage","INFLATING","decompress","pushFragment","dataMessage","perMessageDeflate","err","closeCode","byteOffset","byteLength","buffer","toString","code","isValidErrorCode","fullLength","fragment","totalLength","cb"]
}
