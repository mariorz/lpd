shadow$provide.module$node_modules$json_rpc_engine$src$createAsyncMiddleware=function(global,require,module,exports){module.exports=function(asyncMiddleware){return(req,res,next,end)=>{let resolveNextPromise;const nextPromise=new Promise(resolve=>{resolveNextPromise=resolve});let returnHandlerCallback,nextWasCalled;asyncMiddleware(req,res,async()=>{nextWasCalled=!0;next(callback=>{returnHandlerCallback=callback;resolveNextPromise()});await nextPromise}).then(async()=>{nextWasCalled?(await nextPromise,
returnHandlerCallback(null)):end(null)}).catch(error=>{returnHandlerCallback?returnHandlerCallback(error):end(error)})}}}
//# sourceMappingURL=module$node_modules$json_rpc_engine$src$createAsyncMiddleware.js.map
