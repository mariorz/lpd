{
"version":3,
"file":"module$node_modules$ws$lib$extension.js",
"lineCount":7,
"mappings":"AAAAA,cAAA,CAAe,oCAAf,CAAyD,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAmCjGC,QAASA,KAAK,CAACC,IAAD,CAAOC,IAAP,CAAaC,IAAb,CAAmB,CAC3BC,MAAA,CAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCN,IAArC,CAA2CC,IAA3C,CAAJ,CAAsDD,IAAA,CAAKC,IAAL,CAAA,CAAWF,IAAX,CAAgBG,IAAhB,CAAtD,CACKF,IAAA,CAAKC,IAAL,CADL,CACkB,CAACC,IAAD,CAFa,CArBjC,MAAMK,WAAa,CACjB,CADiB,CACd,CADc,CACX,CADW,CACR,CADQ,CACL,CADK,CACF,CADE,CACC,CADD,CACI,CADJ,CACO,CADP,CACU,CADV,CACa,CADb,CACgB,CADhB,CACmB,CADnB,CACsB,CADtB,CACyB,CADzB,CAC4B,CAD5B,CAEjB,CAFiB,CAEd,CAFc,CAEX,CAFW,CAER,CAFQ,CAEL,CAFK,CAEF,CAFE,CAEC,CAFD,CAEI,CAFJ,CAEO,CAFP,CAEU,CAFV,CAEa,CAFb,CAEgB,CAFhB,CAEmB,CAFnB,CAEsB,CAFtB,CAEyB,CAFzB,CAE4B,CAF5B,CAGjB,CAHiB,CAGd,CAHc,CAGX,CAHW,CAGR,CAHQ,CAGL,CAHK,CAGF,CAHE,CAGC,CAHD,CAGI,CAHJ,CAGO,CAHP,CAGU,CAHV,CAGa,CAHb,CAGgB,CAHhB,CAGmB,CAHnB,CAGsB,CAHtB,CAGyB,CAHzB,CAG4B,CAH5B,CAIjB,CAJiB,CAId,CAJc,CAIX,CAJW,CAIR,CAJQ,CAIL,CAJK,CAIF,CAJE,CAIC,CAJD,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,CAIa,CAJb,CAIgB,CAJhB,CAImB,CAJnB,CAIsB,CAJtB,CAIyB,CAJzB,CAI4B,CAJ5B,CAKjB,CALiB,CAKd,CALc,CAKX,CALW,CAKR,CALQ,CAKL,CALK,CAKF,CALE,CAKC,CALD,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,CAKgB,CALhB,CAKmB,CALnB,CAKsB,CALtB,CAKyB,CALzB,CAK4B,CAL5B,CAMjB,CANiB,CAMd,CANc,CAMX,CANW,CAMR,CANQ,CAML,CANK,CAMF,CANE,CAMC,CAND,CAMI,CANJ,CAMO,CANP,CAMU,CANV,CAMa,CANb,CAMgB,CANhB,CAMmB,CANnB,CAMsB,CANtB,CAMyB,CANzB,CAM4B,CAN5B,CAOjB,CAPiB,CAOd,CAPc,CAOX,CAPW,CAOR,CAPQ,CAOL,CAPK,CAOF,CAPE,CAOC,CAPD,CAOI,CAPJ,CAOO,CAPP,CAOU,CAPV,CAOa,CAPb,CAOgB,CAPhB,CAOmB,CAPnB,CAOsB,CAPtB,CAOyB,CAPzB,CAO4B,CAP5B,CAQjB,CARiB,CAQd,CARc,CAQX,CARW,CAQR,CARQ,CAQL,CARK,CAQF,CARE,CAQC,CARD,CAQI,CARJ,CAQO,CARP,CAQU,CARV,CAQa,CARb,CAQgB,CARhB,CAQmB,CARnB,CAQsB,CARtB,CAQyB,CARzB,CAQ4B,CAR5B,CAqMnBV,OAAA,CAAOC,OAAP,CAAiB,CAAEU,OAdnBA,QAAgB,CAACC,UAAD,CAAa,CAC3B,MAAON,OAAA,CAAOO,IAAP,CAAYD,UAAZ,CAAA,CAAwBE,GAAxB,CAA6BC,SAAD;AAAe,CAChD,IAAIC,eAAiBJ,UAAA,CAAWG,SAAX,CAChBE,MAAA,CAAMC,OAAN,CAAcF,cAAd,CAAL,GAAoCA,cAApC,CAAqD,CAACA,cAAD,CAArD,CACA,OAAOA,eAAA,CAAeF,GAAf,CAAoBK,MAAD,EACjB,CAACJ,SAAD,CAAA,CAAYK,MAAZ,CAAmBd,MAAA,CAAOO,IAAP,CAAYM,MAAZ,CAAA,CAAoBL,GAApB,CAAyBO,CAAD,EAAO,CACvD,IAAIC,OAASH,MAAA,CAAOE,CAAP,CACRJ,MAAA,CAAMC,OAAN,CAAcI,MAAd,CAAL,GAA4BA,MAA5B,CAAqC,CAACA,MAAD,CAArC,CACA,OAAOA,OAAA,CAAOR,GAAP,CAAYS,CAAD,EAAa,CAAA,CAAN,GAAAA,CAAA,CAAaF,CAAb,CAAiB,GAAGA,CAAH,IAAQE,CAAR,EAAnC,CAAA,CAAgDC,IAAhD,CAAqD,IAArD,CAHgD,CAA/B,CAAnB,CAAA,CAIHA,IAJG,CAIE,IAJF,CADF,CAAA,CAMJA,IANI,CAMC,IAND,CAHyC,CAA3C,CAAA,CAUJA,IAVI,CAUC,IAVD,CADoB,CAcZ,CAAUC,MApK3BA,QAAe,CAACC,MAAD,CAAS,CACtB,MAAMC,OAAS,EAEf,IAAeC,IAAAA,EAAf,GAAIF,MAAJ,EAAuC,EAAvC,GAA4BA,MAA5B,CAA2C,MAAOC,OAWlD,KATA,IAAIR,OAAS,EAAb,CACIU,aAAe,CAAA,CADnB,CAEIC,WAAa,CAAA,CAFjB,CAGIC,SAAW,CAAA,CAHf,CAIIC,aAJJ;AAKIC,SALJ,CAMIC,MAAQ,EANZ,CAOIC,IAAM,EAPV,CASSC,EAAI,CAAb,CAAgBA,CAAhB,CAAoBV,MAApB,CAA2BW,MAA3B,CAAmCD,CAAA,EAAnC,CAAwC,CACtC,MAAME,KAAOZ,MAAA,CAAOa,UAAP,CAAkBH,CAAlB,CAEb,IAAsBR,IAAAA,EAAtB,GAAII,aAAJ,CACE,GAAY,EAAZ,GAAIG,GAAJ,EAAuC,CAAvC,GAAkBzB,UAAA,CAAW4B,IAAX,CAAlB,CACgB,EAAd,GAAIJ,KAAJ,GAAkBA,KAAlB,CAA0BE,CAA1B,CADF,KAEO,IAAa,EAAb,GAAIE,IAAJ,EAAsC,CAAtC,GAA6BA,IAA7B,CACO,EAAZ,GAAIH,GAAJ,EAA4B,EAA5B,GAAkBD,KAAlB,GAAgCC,GAAhC,CAAsCC,CAAtC,CADK,KAEA,IAAa,EAAb,GAAIE,IAAJ,EAAuC,EAAvC,GAA8BA,IAA9B,CAAsD,CAC3D,GAAc,EAAd,GAAIJ,KAAJ,CACE,KAAM,KAAIM,WAAJ,CAAgB,iCAAiCJ,CAAjC,EAAhB,CAAN,CAGU,EAAZ,GAAID,GAAJ,GAAgBA,GAAhB,CAAsBC,CAAtB,CACMhC,MAAAA,CAAOsB,MAAA,CAAOe,KAAP,CAAaP,KAAb,CAAoBC,GAApB,CACA,GAAb,GAAIG,IAAJ,EACEpC,IAAA,CAAKyB,MAAL,CAAavB,KAAb,CAAmBe,MAAnB,CACA,CAAAA,MAAA,CAAS,EAFX,EAIEa,aAJF,CAIkB5B,KAGlB8B,MAAA,CAAQC,GAAR,CAAc,EAd6C,CAAtD,IAgBL,MAAM,KAAIK,WAAJ,CAAgB,iCAAiCJ,CAAjC,EAAhB,CAAN;AArBJ,IAuBO,IAAkBR,IAAAA,EAAlB,GAAIK,SAAJ,CACL,GAAY,EAAZ,GAAIE,GAAJ,EAAuC,CAAvC,GAAkBzB,UAAA,CAAW4B,IAAX,CAAlB,CACgB,EAAd,GAAIJ,KAAJ,GAAkBA,KAAlB,CAA0BE,CAA1B,CADF,KAEO,IAAa,EAAb,GAAIE,IAAJ,EAA8B,CAA9B,GAAqBA,IAArB,CACO,EAAZ,GAAIH,GAAJ,EAA4B,EAA5B,GAAkBD,KAAlB,GAAgCC,GAAhC,CAAsCC,CAAtC,CADK,KAEA,IAAa,EAAb,GAAIE,IAAJ,EAA8B,EAA9B,GAAqBA,IAArB,CAAoC,CACzC,GAAc,EAAd,GAAIJ,KAAJ,CACE,KAAM,KAAIM,WAAJ,CAAgB,iCAAiCJ,CAAjC,EAAhB,CAAN,CAGU,EAAZ,GAAID,GAAJ,GAAgBA,GAAhB,CAAsBC,CAAtB,CACAlC,KAAA,CAAKiB,MAAL,CAAaO,MAAA,CAAOe,KAAP,CAAaP,KAAb,CAAoBC,GAApB,CAAb,CAAuC,CAAA,CAAvC,CACa,GAAb,GAAIG,IAAJ,GACEpC,IAAA,CAAKyB,MAAL,CAAaK,aAAb,CAA4Bb,MAA5B,CAEA,CADAA,MACA,CADS,EACT,CAAAa,aAAA,CAAgBJ,IAAAA,EAHlB,CAMAM,MAAA,CAAQC,GAAR,CAAc,EAb2B,CAApC,IAcA,IAAa,EAAb,GAAIG,IAAJ,EAAuC,EAAvC,GAA6BJ,KAA7B,EAAqD,EAArD,GAA6CC,GAA7C,CACLF,SACA,CADYP,MAAA,CAAOe,KAAP,CAAaP,KAAb,CAAoBE,CAApB,CACZ,CAAAF,KAAA,CAAQC,GAAR,CAAc,EAFT,KAIL,MAAM,KAAIK,WAAJ,CAAgB,iCAAiCJ,CAAjC,EAAhB,CAAN;AAvBG,IA+BL,IAAIN,UAAJ,CAAgB,CACd,GAAyB,CAAzB,GAAIpB,UAAA,CAAW4B,IAAX,CAAJ,CACE,KAAM,KAAIE,WAAJ,CAAgB,iCAAiCJ,CAAjC,EAAhB,CAAN,CAEY,EAAd,GAAIF,KAAJ,CAAkBA,KAAlB,CAA0BE,CAA1B,CACUP,YADV,GACwBA,YADxB,CACuC,CAAA,CADvC,CAEAC,WAAA,CAAa,CAAA,CANC,CAAhB,IAOO,IAAIC,QAAJ,CACL,GAAyB,CAAzB,GAAIrB,UAAA,CAAW4B,IAAX,CAAJ,CACgB,EAAd,GAAIJ,KAAJ,GAAkBA,KAAlB,CAA0BE,CAA1B,CADF,KAEO,IAAa,EAAb,GAAIE,IAAJ,EAAwC,EAAxC,GAA8BJ,KAA9B,CACLH,QACA,CADW,CAAA,CACX,CAAAI,GAAA,CAAMC,CAFD,KAGA,IAAa,EAAb,GAAIE,IAAJ,CACLR,UAAA,CAAa,CAAA,CADR,KAGL,MAAM,KAAIU,WAAJ,CAAgB,iCAAiCJ,CAAjC,EAAhB,CAAN,CATG,IAWA,IAAa,EAAb,GAAIE,IAAJ,EAAkD,EAAlD,GAAqBZ,MAAA,CAAOa,UAAP,CAAkBH,CAAlB,CAAsB,CAAtB,CAArB,CACLL,QAAA,CAAW,CAAA,CADN,KAEA,IAAY,EAAZ,GAAII,GAAJ,EAAuC,CAAvC,GAAkBzB,UAAA,CAAW4B,IAAX,CAAlB,CACS,EAAd,GAAIJ,KAAJ,GAAkBA,KAAlB,CAA0BE,CAA1B,CADK,KAEA,IAAc,EAAd;AAAIF,KAAJ,EAA8B,EAA9B,GAAqBI,IAArB,EAA+C,CAA/C,GAAsCA,IAAtC,CAEA,GAAa,EAAb,GAAIA,IAAJ,EAA8B,EAA9B,GAAqBA,IAArB,CAAoC,CACzC,GAAc,EAAd,GAAIJ,KAAJ,CACE,KAAM,KAAIM,WAAJ,CAAgB,iCAAiCJ,CAAjC,EAAhB,CAAN,CAGU,EAAZ,GAAID,GAAJ,GAAgBA,GAAhB,CAAsBC,CAAtB,CACIM,MAAAA,CAAQhB,MAAA,CAAOe,KAAP,CAAaP,KAAb,CAAoBC,GAApB,CACRN,aAAJ,GACEa,KACA,CADQA,KAAA,CAAMC,OAAN,CAAc,KAAd,CAAqB,EAArB,CACR,CAAAd,YAAA,CAAe,CAAA,CAFjB,CAIA3B,KAAA,CAAKiB,MAAL,CAAac,SAAb,CAAwBS,KAAxB,CACa,GAAb,GAAIJ,IAAJ,GACEpC,IAAA,CAAKyB,MAAL,CAAaK,aAAb,CAA4Bb,MAA5B,CAEA,CADAA,MACA,CADS,EACT,CAAAa,aAAA,CAAgBJ,IAAAA,EAHlB,CAMAK,UAAA,CAAYL,IAAAA,EACZM,MAAA,CAAQC,GAAR,CAAc,EAnB2B,CAApC,IAqBL,MAAM,KAAIK,WAAJ,CAAgB,iCAAiCJ,CAAjC,EAAhB,CAAN,CAvBK,IACO,EAAZ,GAAID,GAAJ,GAAgBA,GAAhB,CAAsBC,CAAtB,CAhFkC,CA2GxC,GAAc,EAAd,GAAIF,KAAJ,EAAoBH,QAApB,CACE,KAAM,KAAIS,WAAJ,CAAgB,yBAAhB,CAAN;AAGU,EAAZ,GAAIL,GAAJ,GAAgBA,GAAhB,CAAsBC,CAAtB,CACMQ,OAAAA,CAAQlB,MAAA,CAAOe,KAAP,CAAaP,KAAb,CAAoBC,GAApB,CACQP,KAAAA,EAAtB,GAAII,aAAJ,CACE9B,IAAA,CAAKyB,MAAL,CAAaiB,MAAb,CAAoB,EAApB,CADF,EAGoBhB,IAAAA,EAAlB,GAAIK,SAAJ,CACE/B,IAAA,CAAKiB,MAAL,CAAayB,MAAb,CAAoB,CAAA,CAApB,CADF,CAEWf,YAAJ,CACL3B,IAAA,CAAKiB,MAAL,CAAac,SAAb,CAAwBW,MAAA,CAAMD,OAAN,CAAc,KAAd,CAAqB,EAArB,CAAxB,CADK,CAGLzC,IAAA,CAAKiB,MAAL,CAAac,SAAb,CAAwBW,MAAxB,CAEF,CAAA1C,IAAA,CAAKyB,MAAL,CAAaK,aAAb,CAA4Bb,MAA5B,CAVF,CAaA,OAAOQ,OA5Ie,CAoKP,CAnNgF;",
"sources":["node_modules/ws/lib/extension.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ws$lib$extension\"] = function(global,require,module,exports) {\n'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push (dest, name, elem) {\n  if (Object.prototype.hasOwnProperty.call(dest, name)) dest[name].push(elem);\n  else dest[name] = [elem];\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse (header) {\n  const offers = {};\n\n  if (header === undefined || header === '') return offers;\n\n  var params = {};\n  var mustUnescape = false;\n  var isEscaping = false;\n  var inQuotes = false;\n  var extensionName;\n  var paramName;\n  var start = -1;\n  var end = -1;\n\n  for (var i = 0; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20/* ' ' */|| code === 0x09/* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b/* ';' */ || code === 0x2c/* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = {};\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = {};\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d/* '=' */&& start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22/* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c/* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        var value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = {};\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, {});\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format (extensions) {\n  return Object.keys(extensions).map((extension) => {\n    var configurations = extensions[extension];\n    if (!Array.isArray(configurations)) configurations = [configurations];\n    return configurations.map((params) => {\n      return [extension].concat(Object.keys(params).map((k) => {\n        var values = params[k];\n        if (!Array.isArray(values)) values = [values];\n        return values.map((v) => v === true ? k : `${k}=${v}`).join('; ');\n      })).join('; ');\n    }).join(', ');\n  }).join(', ');\n}\n\nmodule.exports = { format, parse };\n\n};"],
"names":["shadow$provide","global","require","module","exports","push","dest","name","elem","Object","prototype","hasOwnProperty","call","tokenChars","format","extensions","keys","map","extension","configurations","Array","isArray","params","concat","k","values","v","join","parse","header","offers","undefined","mustUnescape","isEscaping","inQuotes","extensionName","paramName","start","end","i","length","code","charCodeAt","SyntaxError","slice","value","replace","token"]
}
