{"version":3,"sources":["revert/subs.cljs"],"mappings":"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","names":["re_frame.core.reg_sub","db","_","positions","pool-addresses","cljs.core/keys","pools","p1__90313#","cljs.core.map","cljs.core.get","pool-tokens","cljs.core.juxt","cljs.core/count","pt","cljs.core/first","cljs.core/second","and__4115__auto__","p1__90314#","cljs.core.filter","cljs.core/contains?","bignumber.core/>","revert.lp-positions/assets-value","revert.utils/bn","cljs.core/vals","p1__90315#","bignumber.core/<=","p1__90316#"],"sourcesContent":["(ns revert.subs\n  (:require\n   [re-frame.core :as re-frame]\n   [bignumber.core :as bn]\n   [revert.utils :as u]\n   [revert.lp-positions :as lp-positions]))\n\n(re-frame/reg-sub\n ::name\n (fn [db]\n   (:name db)))\n\n\n(re-frame/reg-sub\n :showing          ;; usage:   (subscribe [:showing])\n (fn [db _]        ;; db is the (map) value stored in the app-db atom\n   (:showing db))) ;; extract a value from the application state\n\n\n(re-frame/reg-sub\n :connected          ;; usage:   (subscribe [:showing])\n (fn [db _]        ;; db is the (map) value stored in the app-db atom\n   (:connected db))) ;; extract a value from the application state\n\n\n(re-frame/reg-sub\n :account          ;; usage:   (subscribe [:showing])\n (fn [db _]\n   ;; db is the (map) value stored in the app-db atom\n   (:account db))) ;; extract a value from the application state\n\n\n(re-frame/reg-sub\n :pool-address          ;; usage:   (subscribe [:showing])\n (fn [db _]\n   ;; db is the (map) value stored in the app-db atom\n   (:pool-address db))) ;; extract a value from the application state\n\n(re-frame/reg-sub\n :pool-days          ;; usage:   (subscribe [:showing])\n (fn [db _]\n   ;; db is the (map) value stored in the app-db atom\n   (:pool-days db))) ;; extract a value from the application state\n\n\n(re-frame/reg-sub\n :loading\n (fn [db _]\n   (:loading db)))\n\n\n(re-frame/reg-sub\n :include-exited\n (fn [db _]\n   (:include-exited db)))\n\n\n(re-frame/reg-sub\n :expanded-logs\n (fn [db _]\n   (:expanded-logs db)))\n\n\n(re-frame/reg-sub\n :pool-histories\n (fn [db _]\n   ;; db is the (map) value stored in the app-db atom\n   (:pool-histories db))) ;; extract a value from the application state\n\n\n(re-frame/reg-sub\n :pools\n (fn [db _]\n   (:pools db)))\n\n\n\n(re-frame/reg-sub\n :loading-msgs\n (fn [db _]\n   (:loading-msgs db)))\n\n\n\n(re-frame/reg-sub\n :tokens\n (fn [db _]\n   (:tokens db)))\n\n\n(re-frame/reg-sub\n :blocks-ts\n (fn [db _]\n   (:blocks-ts db)))\n\n\n(re-frame/reg-sub\n :pool-assets\n (fn [db _]\n   (let [positions (:lp-positions db)\n         pool-addresses (keys positions)\n         pools (map #(get (:pools db) %) pool-addresses)\n         pool-tokens (map (juxt :token0-address :token1-address) pools)]\n     (when (> (count (:tokens db)) 0)\n       (map (fn [pt]\n              [(:symbol (get (:tokens db) (first pt)))\n               (:symbol (get (:tokens db) (second pt)))])\n            pool-tokens)))))\n\n\n(re-frame/reg-sub\n :all-loaded\n (fn [db _]\n   (and (:account-loaded db)\n        (:pool-histories-loaded db)\n        (:pool-stakings-loaded db)\n        (:tokens-loaded db))))\n\n\n(re-frame/reg-sub\n :open-lp-positions\n (fn [db _]\n   (filter #(and\n             (not (contains? (:ignored-pools db) (:address %)))\n             (bn/> (lp-positions/assets-value % (get (:pools db) (:address %)) (:tokens db)) (u/bn \"0.0001\")))\n           (vals (:lp-positions db)))))\n\n\n\n(re-frame/reg-sub\n :closed-lp-positions\n (fn [db _]\n   (filter #(and\n             (not (contains? (:ignored-pools db) (:address %)))\n             (bn/<= (lp-positions/assets-value % (get (:pools db) (:address %)) (:tokens db)) (u/bn \"0.0001\")))\n           (vals (:lp-positions db)))))\n\n\n(re-frame/reg-sub\n :ignored-lp-positions\n (fn [db _]\n   (filter #(contains? (:ignored-pools db) (:address %))\n           (vals (:lp-positions db)))))\n\n\n"]}