{"version":3,"sources":["re_frisk/ui/views.cljs"],"mappings":"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","names":["re-frisk.ui.views/subs-view","subs","checkbox-sorted-val","state-atom","reagent.core.atom","re-frisk.ui.components.frisk/expand-by-default","_","re-frisk.ui.components.frisk/Root","cljs.core/deref","re-frisk.utils/sort-map","re-frisk.ui.views/app-db-view","app-db","tool-state","re-com.core/v-box","re-com.core/h-box","re-com.core/label","re-com.core/gap","re-com.core/checkbox","re-frisk.utils/on-change-sort","re-frisk.ui.views/frisks-view","re-frame-data","doc","subs-checkbox-sorted-val","open-event-split?","reagent.ratom/make-reaction","cljs.core/boolean","cljs.core.get","re-frisk.ui.components.splits/v-split","re-frisk.ui.events/event-bar","re-frisk.ui.events/frisk-view","re-frisk.ui.views/controls","map__63742","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","timeline-opened?","paused?","graph-opened?","re-frisk.ui.components.components/label-button","cljs.core.swap_BANG_","cljs.core/update","cljs.core/not","cljs.core/reset!","cljs.core/dissoc","cljs.core/assoc","re-frisk.ui.components.github/link","var_args","args__4742__auto__","len__4736__auto__","i__4737__auto__","argseq__4743__auto__","cljs.core/IndexedSeq","re-frisk.ui.views/main-view","p__63754","vec__63755","cljs.core.nth","seq63748","G__63749","cljs.core/first","cljs.core/next","G__63750","self__4723__auto__","open-graph-split?","re-frisk.ui.subs/subs-visibility","re-frisk.ui.timeline/timeline-visibility","re-frisk.ui.components.splits/h-split","re-frisk.ui.events/events-list-view"],"sourcesContent":["(ns re-frisk.ui.views\n  (:require-macros [reagent.ratom :refer [reaction]])\n  (:require\n   [reagent.core :as reagent]\n   [re-com.core :as re-com]\n   [re-frisk.ui.events :as events]\n   [re-frisk.ui.components.splits :as splits]\n   [re-frisk.ui.components.frisk :as frisk]\n   [re-frisk.utils :as utils]\n   [re-frisk.ui.timeline :as timeline]\n   [re-frisk.ui.components.components :as components]\n   [re-frisk.ui.subs :as subs]\n   [re-frisk.ui.components.github :as github]))\n\n(defn subs-view [subs checkbox-sorted-val]\n  (let [state-atom (reagent/atom frisk/expand-by-default)]\n    (fn [_]\n      [frisk/Root (utils/sort-map @subs @checkbox-sorted-val checkbox-sorted-val) 0 state-atom])))\n\n(defn app-db-view [app-db tool-state]\n  (let [state-atom          (reagent/atom frisk/expand-by-default)\n        checkbox-sorted-val (reagent/atom true)]\n    (fn [_]\n      [re-com/v-box :size \"1\"\n       :children\n       [[re-com/h-box\n         :children\n         [[re-com/label :label \"app-db\"]\n          [re-com/gap :size \"20px\"]\n          [re-com/checkbox\n           :model checkbox-sorted-val\n           :on-change (utils/on-change-sort app-db checkbox-sorted-val :re-frisk-sorted)\n           :label \"sort\"]\n          (when (:app-db-delta-error @tool-state)\n            [re-com/label :label \"update error\" :style {:margin-left \"4px\" :color \"#df691a\"}])]]\n        [frisk/Root (utils/sort-map @app-db @checkbox-sorted-val checkbox-sorted-val) 0 state-atom]]])))\n\n(defn frisks-view [re-frame-data tool-state doc]\n  (let [subs-checkbox-sorted-val (reagent/atom true)\n        open-event-split?        (reaction (boolean (get @tool-state :selected-event)))]\n    (fn [_ _ _]\n      [re-com/v-box :size \"1\" :style {:padding \"0\"}\n       :children [[re-com/h-box :style {:background-color \"#4e5d6c\"}\n                   :children\n                   [[re-com/label :label \"Active subscriptions\"]\n                    [re-com/gap :size \"20px\"]\n                    [re-com/checkbox\n                     :model subs-checkbox-sorted-val\n                     :on-change (utils/on-change-sort (:subs re-frame-data) subs-checkbox-sorted-val [[:re-frisk-sorted] []])\n                     :label \"sort\"]\n                    (when (:subs-delta-error @tool-state)\n                      [re-com/label :label \"update error\" :style {:margin-left \"4px\" :color \"#df691a\"}])]]\n                  [splits/v-split :size \"1\" :initial-split \"0\" :style {:padding \"0\" :margin \"0\"} :document doc\n                   ;; SUBS\n                   :panel-1 [subs-view (:subs re-frame-data) subs-checkbox-sorted-val]\n                   :panel-2 [splits/v-split :size \"1\" :initial-split \"100\" :style {:padding \"0\" :margin \"0\"}\n                             :document doc :open-bottom-split? @open-event-split?\n                             :panel-1 [re-com/v-box :size \"1\" :style {:background-color \"#4e5d6c\"}\n                                       :children\n                                       ;; APP-DB\n                                       [[app-db-view (:app-db re-frame-data) tool-state]\n                                        [events/event-bar tool-state]]]\n                             ;; EVENT\n                             :panel-2 [events/frisk-view tool-state]]]]])))\n\n(defn controls [re-frame-data tool-state]\n  (let [{:keys [timeline-opened? paused? graph-opened?]}  @tool-state]\n    [re-com/h-box :style {:background-color \"#4e5d6c\"} :align :center\n     :children\n     [[components/label-button {:on-click #(swap! tool-state update :paused? not)\n                                :active? paused?}\n       (if paused? \"Resume\" \"Pause\")]\n      [re-com/gap :size \"5px\"]\n      [components/label-button\n       {:on-click #(do (reset! (:events re-frame-data) [])\n                       (swap! tool-state dissoc :selected-event))\n        :active? false}\n       \"Clear\"]\n      [re-com/gap :size \"1\"]\n      [components/label-button {:on-click #(do\n                                             (swap! tool-state assoc :graph-opened? false)\n                                             (swap! tool-state update :timeline-opened? not))\n                                :active? timeline-opened?}\n       \"Timeline\"]\n      [re-com/gap :size \"5px\"]\n      [components/label-button {:on-click #(do\n                                             (swap! tool-state assoc :timeline-opened? false)\n                                             (swap! tool-state update :graph-opened? not))\n                                :active? graph-opened?}\n       \"Subs\"]\n      [re-com/gap :size \"15px\"]\n      [github/link]\n      [re-com/gap :size \"5px\"]]]))\n\n(defn main-view [re-frame-data tool-state & [doc]]\n  (let [open-graph-split? (reaction (get @tool-state :graph-opened?))]\n    (fn []\n      [splits/v-split :height \"100%\" :initial-split \"0\" :document doc :style {:padding \"0\" :margin \"0\"}\n       :open-bottom-split? @open-graph-split? :close-bottom-split? (not @open-graph-split?)\n       :panel-1\n       [subs/subs-visibility re-frame-data tool-state]\n       :panel-2\n       [re-com/v-box :size \"1\"\n        :children\n        [[timeline/timeline-visibility re-frame-data tool-state]\n         [controls re-frame-data tool-state]\n         [splits/h-split :size \"1\" :initial-split \"25\" :document doc\n          ;;EVENTS\n          :panel-1 [events/events-list-view re-frame-data tool-state]\n          ;;MAIN (subs, app-db, event)\n          :panel-2 [frisks-view re-frame-data tool-state doc]]]]])))"]}