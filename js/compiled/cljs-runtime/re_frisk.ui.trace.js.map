{"version":3,"sources":["re_frisk/ui/trace.cljs"],"mappings":"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","names":["re-frisk.ui.trace/subs-count","label","val","color","duration-ms","p__62036","map__62037","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","re-frisk.ui.trace/subs-details","run-count","created-count","disposed-count","subs","render-count","run-duration-ms","created-duration-ms","disposed-duration-ms","render-duration-ms","created-count-cached","created-duration-cached-ms","re-frisk.ui.components.colors/sub-create","re-frisk.ui.components.colors/sub-create-cached","re-frisk.ui.components.colors/sub-run","re-frisk.ui.components.colors/sub-dispose","re-frisk.ui.components.colors/render","re-frisk.ui.components.components/scroller","iter__4529__auto__","s__62044","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","cljs.core/count","b__62046","cljs.core/chunk-buffer","i__62045","map__62049","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__62043","cljs.core/chunk-rest","map__62054","cljs.core/first","cljs.core/cons","cljs.core/rest","id","op-type","operation","cached?","re-frisk.ui.components.colors/sub-colors","p__62056","map__62057","re-frisk.ui.trace/subs-item","p__62062","map__62063","re-frisk.ui.trace/trace-item","tool-state","p__62068","map__62069","selected?","indx","item","_","event","cljs.core.swap_BANG_","cljs.core/assoc","re-frisk.utils/scroll-timeline-event-item","cljs.core/deref","cljs.core._EQ_","p__62071","map__62072","re-frisk.ui.trace/trace-event-item","name","cljs.core/chunk-first"],"sourcesContent":["(ns re-frisk.ui.trace\n  (:require-macros [reagent.ratom :refer [reaction]])\n  (:require [re-frisk.ui.components.components :as components]\n            [re-frisk.utils :as utils]\n            [re-frisk.ui.components.colors :as colors]))\n\n(defn subs-count [label val color duration-ms]\n  [:div {:style {:display        :flex :align-items :center :margin-right 10\n                 :flex-direction :column}}\n   label\n   [:div {:style {:display :flex :align-items :center}}\n    [:div {:style {:display       :flex :margin 5 :padding-left 4 :padding-right 4 :background-color color\n                   :border-radius 4 :color :white}}\n     val]\n    duration-ms]])\n\n(defn subs-details [{:keys [duration-ms run-count created-count disposed-count subs render-count\n                            run-duration-ms created-duration-ms disposed-duration-ms render-duration-ms\n                            created-count-cached created-duration-cached-ms]}]\n  [:div {:style {:display :flex :flex 1 :background-color \"#f3f3f3\" :color \"#444444\"\n                 :padding 8 :flex-direction :column}}\n   [:div {:style {:margin-top 8 :margin-bottom 8}} \"Total time: \" duration-ms]\n   [:div {:style {:display :flex :flex-direction :row :margin-bottom 8}}\n    [subs-count \"Created\" created-count colors/sub-create created-duration-ms]\n    [subs-count \"Cached\" created-count-cached colors/sub-create-cached created-duration-cached-ms]\n    [subs-count \"Run\" run-count colors/sub-run run-duration-ms]\n    [subs-count \"Disposed\" disposed-count colors/sub-dispose disposed-duration-ms]\n    [subs-count \"Render\" render-count colors/render render-duration-ms]]\n   [components/scroller\n    (for [{:keys [id duration-ms op-type operation cached?]} subs]\n      ^{:key (str \"item\" id)}\n      [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between}}\n       [:div {:style {:display :flex :min-width 100\n                      :color (get colors/sub-colors (if cached? :sub/create-cached op-type))}}\n        (str op-type)]\n       [:div {:style {:display :flex :min-width 100}} (str operation)]\n       [:div duration-ms]])]])\n\n(defn subs-item [{:keys [duration-ms run-count created-count disposed-count render-count]}]\n  [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between}}\n   [:div \"subs\"]\n   [:div {:style {:display :flex :flex-direction :row}}\n    duration-ms\n    (when-not (zero? created-count)\n      [:div {:style {:background-color colors/sub-create :margin-left 5}}\n       created-count])\n    [:div {:style {:background-color colors/sub-run :margin-left 5}}\n     run-count]\n    (when-not (zero? disposed-count)\n      [:div {:style {:background-color colors/sub-dispose :margin-left 5}}\n       disposed-count])\n    (when-not (zero? render-count)\n      [:div {:style {:background-color colors/render :margin-left 5}}\n       render-count])]])\n\n(defn trace-item [{:keys [op-type]} tool-state]\n  ;(when-not (= op-type :re-frame.router/fsm-trigger)\n  (fn [{:keys [selected? op-type indx] :as item} _]\n    [:a\n     {:href     \"#\"\n      :id       (str \"events-list-item\" indx)\n      :class    (str \"list-group-item\" (when selected? \" active\"))\n      :style    {:padding           0 :font-size 11 :opacity \"0.7\"\n                 :border-left-width 2 :white-space :pre :width \"100%\"}\n      :on-click (fn [event]\n                  (swap! tool-state assoc :selected-event item)\n                  (utils/scroll-timeline-event-item (:doc @tool-state) indx)\n                  (.preventDefault event))}\n     (if (= :subs op-type)\n       [subs-item item]\n       [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between}}\n        [:div (str op-type)]])]))\n\n(defn trace-event-item [{:keys [name duration-ms]}]\n  [:div {:style {:display :flex :flex-direction :row :flex 1 :justify-content :space-between :align-items :center}}\n   [:div {:style {:display :flex :overflow :hidden}} name]\n   [:div {:style {:display :flex :font-size 11 :margin-left 5}}\n    duration-ms]])"]}