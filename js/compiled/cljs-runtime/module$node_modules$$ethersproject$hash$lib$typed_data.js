shadow$provide.module$node_modules$$ethersproject$hash$lib$typed_data=function(global,require,module,exports){function checkString(key){return function(value){"string"!==typeof value&&logger.throwArgumentError("invalid domain value for "+JSON.stringify(key),"domain."+key,value);return value}}function getBaseEncoder(type){var match=type.match(/^(u?)int(\d*)$/);if(match){var signed=""===match[1],width=parseInt(match[2]||"256");(0!==width%8||256<width||match[2]&&match[2]!==String(width))&&logger.throwArgumentError("invalid numeric width",
"type",type);var boundsUpper_1=MaxUint256.mask(signed?width-1:width),boundsLower_1=signed?boundsUpper_1.add(One).mul(NegativeOne):Zero;return function(value){var v=bignumber_1.BigNumber.from(value);(v.lt(boundsLower_1)||v.gt(boundsUpper_1))&&logger.throwArgumentError("value out-of-bounds for "+type,"value",value);return bytes_1.hexZeroPad(v.toTwos(256).toHexString(),32)}}if(match=type.match(/^bytes(\d+)$/)){var width_1=parseInt(match[1]);(0===width_1||32<width_1||match[1]!==String(width_1))&&logger.throwArgumentError("invalid bytes width",
"type",type);return function(value){bytes_1.arrayify(value).length!==width_1&&logger.throwArgumentError("invalid length for "+type,"value",value);value=bytes_1.arrayify(value);var padOffset=value.length%32;value=padOffset?bytes_1.hexConcat([value,padding.slice(padOffset)]):bytes_1.hexlify(value);return value}}switch(type){case "address":return function(value){return bytes_1.hexZeroPad(address_1.getAddress(value),32)};case "bool":return function(value){return value?hexTrue:hexFalse};case "bytes":return function(value){return keccak256_1.keccak256(value)};
case "string":return function(value){return id_1.id(value)}}return null}function encodeType(name,fields){return name+"("+fields.map(function(_a){return _a.type+" "+_a.name}).join(",")+")"}var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new (P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}
function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=
0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=0<t.length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else if(t&&_.label<t[2])_.label=t[2],_.ops.push(op);else{t[2]&&_.ops.pop();_.trys.pop();continue}}op=body.call(thisArg,
_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},"function"===typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g};Object.defineProperty(exports,"__esModule",{value:!0});exports.TypedDataEncoder=void 0;var address_1=require("module$node_modules$$ethersproject$address$lib$index"),bignumber_1=
require("module$node_modules$$ethersproject$bignumber$lib$index"),bytes_1=require("module$node_modules$$ethersproject$bytes$lib$index"),keccak256_1=require("module$node_modules$$ethersproject$keccak256$lib$index"),properties_1=require("module$node_modules$$ethersproject$properties$lib$index");global=require("module$node_modules$$ethersproject$logger$lib$index");module=require("module$node_modules$$ethersproject$hash$lib$_version");var logger=new global.Logger(module.version),id_1=require("module$node_modules$$ethersproject$hash$lib$id"),
padding=new Uint8Array(32);padding.fill(0);var NegativeOne=bignumber_1.BigNumber.from(-1),Zero=bignumber_1.BigNumber.from(0),One=bignumber_1.BigNumber.from(1),MaxUint256=bignumber_1.BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),hexTrue=bytes_1.hexZeroPad(One.toHexString(),32),hexFalse=bytes_1.hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name",
"version","chainId","verifyingContract","salt"],domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(value){try{return bignumber_1.BigNumber.from(value).toString()}catch(error){}return logger.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",value)},verifyingContract:function(value){try{return address_1.getAddress(value).toLowerCase()}catch(error){}return logger.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",
value)},salt:function(value){try{var bytes=bytes_1.arrayify(value);if(32!==bytes.length)throw Error("bad length");return bytes_1.hexlify(bytes)}catch(error){}return logger.throwArgumentError('invalid domain value "salt"',"domain.salt",value)}};require=function(){function TypedDataEncoder(types){function checkCircular(type,found){found[type]&&logger.throwArgumentError("circular type reference to "+JSON.stringify(type),"types",types);found[type]=!0;Object.keys(links[type]).forEach(function(child){parents[child]&&
(checkCircular(child,found),Object.keys(found).forEach(function(subtype){subtypes[subtype][child]=!0}))});delete found[type]}properties_1.defineReadOnly(this,"types",Object.freeze(properties_1.deepCopy(types)));properties_1.defineReadOnly(this,"_encoderCache",{});properties_1.defineReadOnly(this,"_types",{});var links={},parents={},subtypes={};Object.keys(types).forEach(function(type){links[type]={};parents[type]=[];subtypes[type]={}});var _loop_1=function(name_1){var uniqueNames={};types[name_1].forEach(function(field){uniqueNames[field.name]&&
logger.throwArgumentError("duplicate variable name "+JSON.stringify(field.name)+" in "+JSON.stringify(name_1),"types",types);uniqueNames[field.name]=!0;field=field.type.match(/^([^\x5b]*)(\x5b|$)/)[1];field===name_1&&logger.throwArgumentError("circular type reference to "+JSON.stringify(field),"types",types);getBaseEncoder(field)||(parents[field]||logger.throwArgumentError("unknown type "+JSON.stringify(field),"types",types),parents[field].push(name_1),links[name_1][field]=!0)})},name_1;for(name_1 in types)_loop_1(name_1);
_loop_1=Object.keys(parents).filter(function(n){return 0===parents[n].length});0===_loop_1.length?logger.throwArgumentError("missing primary type","types",types):1<_loop_1.length&&logger.throwArgumentError("ambiguous primary types or unused types: "+_loop_1.map(function(t){return JSON.stringify(t)}).join(", "),"types",types);properties_1.defineReadOnly(this,"primaryType",_loop_1[0]);checkCircular(this.primaryType,{});for(var name_2 in subtypes)_loop_1=Object.keys(subtypes[name_2]),_loop_1.sort(),
this._types[name_2]=encodeType(name_2,types[name_2])+_loop_1.map(function(t){return encodeType(t,types[t])}).join("")}TypedDataEncoder.prototype.getEncoder=function(type){var encoder=this._encoderCache[type];encoder||(encoder=this._encoderCache[type]=this._getEncoder(type));return encoder};TypedDataEncoder.prototype._getEncoder=function(type){var _this=this,encoder=getBaseEncoder(type);if(encoder)return encoder;if(encoder=type.match(/^(.*)(\x5b(\d*)\x5d)$/)){var subtype_1=encoder[1],subEncoder_1=
this.getEncoder(subtype_1),length_1=parseInt(encoder[3]);return function(value){0<=length_1&&value.length!==length_1&&logger.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",value);value=value.map(subEncoder_1);_this._types[subtype_1]&&(value=value.map(keccak256_1.keccak256));return keccak256_1.keccak256(bytes_1.hexConcat(value))}}var fields=this.types[type];if(fields){var encodedType_1=id_1.id(this._types[type]);return function(value){var values=fields.map(function(_a){var name=
_a.name;_a=_a.type;name=_this.getEncoder(_a)(value[name]);return _this._types[_a]?keccak256_1.keccak256(name):name});values.unshift(encodedType_1);return bytes_1.hexConcat(values)}}return logger.throwArgumentError("unknown type: "+type,"type",type)};TypedDataEncoder.prototype.encodeType=function(name){var result=this._types[name];result||logger.throwArgumentError("unknown type: "+JSON.stringify(name),"name",name);return result};TypedDataEncoder.prototype.encodeData=function(type,value){return this.getEncoder(type)(value)};
TypedDataEncoder.prototype.hashStruct=function(name,value){return keccak256_1.keccak256(this.encodeData(name,value))};TypedDataEncoder.prototype.encode=function(value){return this.encodeData(this.primaryType,value)};TypedDataEncoder.prototype.hash=function(value){return this.hashStruct(this.primaryType,value)};TypedDataEncoder.prototype._visit=function(type,value,callback){var _this=this;if(getBaseEncoder(type))return callback(type,value);var match=type.match(/^(.*)(\x5b(\d*)\x5d)$/);if(match){var subtype_2=
match[1];type=parseInt(match[3]);0<=type&&value.length!==type&&logger.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",value);return value.map(function(v){return _this._visit(subtype_2,v,callback)})}return(match=this.types[type])?match.reduce(function(accum,_a){var name=_a.name;accum[name]=_this._visit(_a.type,value[name],callback);return accum},{}):logger.throwArgumentError("unknown type: "+type,"type",type)};TypedDataEncoder.prototype.visit=function(value,callback){return this._visit(this.primaryType,
value,callback)};TypedDataEncoder.from=function(types){return new TypedDataEncoder(types)};TypedDataEncoder.getPrimaryType=function(types){return TypedDataEncoder.from(types).primaryType};TypedDataEncoder.hashStruct=function(name,types,value){return TypedDataEncoder.from(types).hashStruct(name,value)};TypedDataEncoder.hashDomain=function(domain){var domainFields=[],name_3;for(name_3 in domain){var type=domainFieldTypes[name_3];type||logger.throwArgumentError("invalid typed-data domain key: "+JSON.stringify(name_3),
"domain",domain);domainFields.push({name:name_3,type})}domainFields.sort(function(a,b){return domainFieldNames.indexOf(a.name)-domainFieldNames.indexOf(b.name)});return TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:domainFields},domain)};TypedDataEncoder.encode=function(domain,types,value){return bytes_1.hexConcat(["0x1901",TypedDataEncoder.hashDomain(domain),TypedDataEncoder.from(types).hash(value)])};TypedDataEncoder.hash=function(domain,types,value){return keccak256_1.keccak256(TypedDataEncoder.encode(domain,
types,value))};TypedDataEncoder.resolveNames=function(domain,types,value$jscomp$0,resolveName){return __awaiter(this,void 0,void 0,function(){var ensCache,encoder,_a,_b,_i,name_4,_c,_d;return __generator(this,function(_e){switch(_e.label){case 0:domain=properties_1.shallowCopy(domain);ensCache={};domain.verifyingContract&&!bytes_1.isHexString(domain.verifyingContract,20)&&(ensCache[domain.verifyingContract]="0x");encoder=TypedDataEncoder.from(types);encoder.visit(value$jscomp$0,function(type,value){"address"!==
type||bytes_1.isHexString(value,20)||(ensCache[value]="0x");return value});_a=[];for(_b in ensCache)_a.push(_b);_i=0;_e.label=1;case 1:if(!(_i<_a.length))return[3,4];name_4=_a[_i];_c=ensCache;_d=name_4;return[4,resolveName(name_4)];case 2:_c[_d]=_e.sent(),_e.label=3;case 3:return _i++,[3,1];case 4:return domain.verifyingContract&&ensCache[domain.verifyingContract]&&(domain.verifyingContract=ensCache[domain.verifyingContract]),value$jscomp$0=encoder.visit(value$jscomp$0,function(type,value){return"address"===
type&&ensCache[value]?ensCache[value]:value}),[2,{domain,value:value$jscomp$0}]}})})};TypedDataEncoder.getPayload=function(domain,types,value$jscomp$0){TypedDataEncoder.hashDomain(domain);var domainValues={},domainTypes=[];domainFieldNames.forEach(function(name){var value=domain[name];null!=value&&(domainValues[name]=domainChecks[name](value),domainTypes.push({name,type:domainFieldTypes[name]}))});var encoder=TypedDataEncoder.from(types),typesWithDomain=properties_1.shallowCopy(types);typesWithDomain.EIP712Domain?
logger.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",types):typesWithDomain.EIP712Domain=domainTypes;encoder.encode(value$jscomp$0);return{types:typesWithDomain,domain:domainValues,primaryType:encoder.primaryType,message:encoder.visit(value$jscomp$0,function(type,value){if(type.match(/^bytes(\d*)/))return bytes_1.hexlify(bytes_1.arrayify(value));if(type.match(/^u?int/))return bignumber_1.BigNumber.from(value).toString();switch(type){case "address":return value.toLowerCase();
case "bool":return!!value;case "string":return"string"!==typeof value&&logger.throwArgumentError("invalid string","value",value),value}return logger.throwArgumentError("unsupported type","type",type)})}};return TypedDataEncoder}();exports.TypedDataEncoder=require}
//# sourceMappingURL=module$node_modules$$ethersproject$hash$lib$typed_data.js.map
