{
"version":3,
"file":"module$node_modules$elliptic$lib$elliptic$ec$index.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/elliptic/lib/elliptic/ec/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$elliptic$lib$elliptic$ec$index\"] = function(global,require,module,exports) {\n'use strict';\n\nvar BN = require('bn.js');\nvar HmacDRBG = require('hmac-drbg');\nvar utils = require('../utils');\nvar curves = require('../curves');\nvar rand = require('brorand');\nvar assert = utils.assert;\n\nvar KeyPair = require('./key');\nvar Signature = require('./signature');\n\nfunction EC(options) {\n  if (!(this instanceof EC))\n    return new EC(options);\n\n  // Shortcut `elliptic.ec(curve-name)`\n  if (typeof options === 'string') {\n    assert(Object.prototype.hasOwnProperty.call(curves, options),\n      'Unknown curve ' + options);\n\n    options = curves[options];\n  }\n\n  // Shortcut for `elliptic.ec(elliptic.curves.curveName)`\n  if (options instanceof curves.PresetCurve)\n    options = { curve: options };\n\n  this.curve = options.curve.curve;\n  this.n = this.curve.n;\n  this.nh = this.n.ushrn(1);\n  this.g = this.curve.g;\n\n  // Point on curve\n  this.g = options.curve.g;\n  this.g.precompute(options.curve.n.bitLength() + 1);\n\n  // Hash for function for DRBG\n  this.hash = options.hash || options.curve.hash;\n}\nmodule.exports = EC;\n\nEC.prototype.keyPair = function keyPair(options) {\n  return new KeyPair(this, options);\n};\n\nEC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {\n  return KeyPair.fromPrivate(this, priv, enc);\n};\n\nEC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {\n  return KeyPair.fromPublic(this, pub, enc);\n};\n\nEC.prototype.genKeyPair = function genKeyPair(options) {\n  if (!options)\n    options = {};\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n    entropy: options.entropy || rand(this.hash.hmacStrength),\n    entropyEnc: options.entropy && options.entropyEnc || 'utf8',\n    nonce: this.n.toArray(),\n  });\n\n  var bytes = this.n.byteLength();\n  var ns2 = this.n.sub(new BN(2));\n  for (;;) {\n    var priv = new BN(drbg.generate(bytes));\n    if (priv.cmp(ns2) > 0)\n      continue;\n\n    priv.iaddn(1);\n    return this.keyFromPrivate(priv);\n  }\n};\n\nEC.prototype._truncateToN = function _truncateToN(msg, truncOnly) {\n  var delta = msg.byteLength() * 8 - this.n.bitLength();\n  if (delta > 0)\n    msg = msg.ushrn(delta);\n  if (!truncOnly && msg.cmp(this.n) >= 0)\n    return msg.sub(this.n);\n  else\n    return msg;\n};\n\nEC.prototype.sign = function sign(msg, key, enc, options) {\n  if (typeof enc === 'object') {\n    options = enc;\n    enc = null;\n  }\n  if (!options)\n    options = {};\n\n  key = this.keyFromPrivate(key, enc);\n  msg = this._truncateToN(new BN(msg, 16));\n\n  // Zero-extend key to provide enough entropy\n  var bytes = this.n.byteLength();\n  var bkey = key.getPrivate().toArray('be', bytes);\n\n  // Zero-extend nonce to have the same byte size as N\n  var nonce = msg.toArray('be', bytes);\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    entropy: bkey,\n    nonce: nonce,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n  });\n\n  // Number of bytes to generate\n  var ns1 = this.n.sub(new BN(1));\n\n  for (var iter = 0; ; iter++) {\n    var k = options.k ?\n      options.k(iter) :\n      new BN(drbg.generate(this.n.byteLength()));\n    k = this._truncateToN(k, true);\n    if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0)\n      continue;\n\n    var kp = this.g.mul(k);\n    if (kp.isInfinity())\n      continue;\n\n    var kpX = kp.getX();\n    var r = kpX.umod(this.n);\n    if (r.cmpn(0) === 0)\n      continue;\n\n    var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));\n    s = s.umod(this.n);\n    if (s.cmpn(0) === 0)\n      continue;\n\n    var recoveryParam = (kp.getY().isOdd() ? 1 : 0) |\n                        (kpX.cmp(r) !== 0 ? 2 : 0);\n\n    // Use complement of `s`, if it is > `n / 2`\n    if (options.canonical && s.cmp(this.nh) > 0) {\n      s = this.n.sub(s);\n      recoveryParam ^= 1;\n    }\n\n    return new Signature({ r: r, s: s, recoveryParam: recoveryParam });\n  }\n};\n\nEC.prototype.verify = function verify(msg, signature, key, enc) {\n  msg = this._truncateToN(new BN(msg, 16));\n  key = this.keyFromPublic(key, enc);\n  signature = new Signature(signature, 'hex');\n\n  // Perform primitive values validation\n  var r = signature.r;\n  var s = signature.s;\n  if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0)\n    return false;\n  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0)\n    return false;\n\n  // Validate signature\n  var sinv = s.invm(this.n);\n  var u1 = sinv.mul(msg).umod(this.n);\n  var u2 = sinv.mul(r).umod(this.n);\n  var p;\n\n  if (!this.curve._maxwellTrick) {\n    p = this.g.mulAdd(u1, key.getPublic(), u2);\n    if (p.isInfinity())\n      return false;\n\n    return p.getX().umod(this.n).cmp(r) === 0;\n  }\n\n  // NOTE: Greg Maxwell's trick, inspired by:\n  // https://git.io/vad3K\n\n  p = this.g.jmulAdd(u1, key.getPublic(), u2);\n  if (p.isInfinity())\n    return false;\n\n  // Compare `p.x` of Jacobian point with `r`,\n  // this will do `p.x == r * p.z^2` instead of multiplying `p.x` by the\n  // inverse of `p.z^2`\n  return p.eqXToP(r);\n};\n\nEC.prototype.recoverPubKey = function(msg, signature, j, enc) {\n  assert((3 & j) === j, 'The recovery param is more than two bits');\n  signature = new Signature(signature, enc);\n\n  var n = this.n;\n  var e = new BN(msg);\n  var r = signature.r;\n  var s = signature.s;\n\n  // A set LSB signifies that the y-coordinate is odd\n  var isYOdd = j & 1;\n  var isSecondKey = j >> 1;\n  if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey)\n    throw new Error('Unable to find sencond key candinate');\n\n  // 1.1. Let x = r + jn.\n  if (isSecondKey)\n    r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);\n  else\n    r = this.curve.pointFromX(r, isYOdd);\n\n  var rInv = signature.r.invm(n);\n  var s1 = n.sub(e).mul(rInv).umod(n);\n  var s2 = s.mul(rInv).umod(n);\n\n  // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n  return this.g.mulAdd(s1, r, s2);\n};\n\nEC.prototype.getKeyRecoveryParam = function(e, signature, Q, enc) {\n  signature = new Signature(signature, enc);\n  if (signature.recoveryParam !== null)\n    return signature.recoveryParam;\n\n  for (var i = 0; i < 4; i++) {\n    var Qprime;\n    try {\n      Qprime = this.recoverPubKey(e, signature, i);\n    } catch (e) {\n      continue;\n    }\n\n    if (Qprime.eq(Q))\n      return i;\n  }\n  throw new Error('Unable to find valid recovery factor');\n};\n\n};"],
"names":["shadow$provide","global","require","module","exports","EC","options","assert","Object","prototype","hasOwnProperty","call","curves","PresetCurve","curve","n","nh","ushrn","g","precompute","bitLength","hash","BN","HmacDRBG","utils","rand","KeyPair","Signature","keyPair","EC.prototype.keyPair","keyFromPrivate","EC.prototype.keyFromPrivate","priv","enc","fromPrivate","keyFromPublic","EC.prototype.keyFromPublic","pub","fromPublic","genKeyPair","EC.prototype.genKeyPair","drbg","pers","persEnc","entropy","hmacStrength","entropyEnc","nonce","toArray","bytes","byteLength","ns2","sub","generate","cmp","iaddn","_truncateToN","EC.prototype._truncateToN","msg","truncOnly","delta","sign","EC.prototype.sign","key","bkey","getPrivate","ns1","iter","k","cmpn","kp","mul","isInfinity","kpX","getX","r","umod","s","invm","iadd","recoveryParam","getY","isOdd","canonical","verify","EC.prototype.verify","signature","sinv","u1","u2","_maxwellTrick","p","mulAdd","getPublic","jmulAdd","eqXToP","recoverPubKey","EC.prototype.recoverPubKey","j","e","isYOdd","isSecondKey","Error","pointFromX","add","rInv","s1","s2","getKeyRecoveryParam","EC.prototype.getKeyRecoveryParam","Q","i","Qprime","eq"]
}
