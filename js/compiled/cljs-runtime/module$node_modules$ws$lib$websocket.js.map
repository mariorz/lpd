{
"version":3,
"file":"module$node_modules$ws$lib$websocket.js",
"lineCount":25,
"mappings":"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",
"sources":["node_modules/ws/lib/websocket.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ws$lib$websocket\"] = function(global,require,module,exports) {\nvar process = require('process');\n'use strict';\n\nconst EventEmitter = require('events');\nconst crypto = require('crypto');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst url = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst EventTarget = require('./event-target');\nconst extension = require('./extension');\nconst constants = require('./constants');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst kWebSocket = constants.kWebSocket;\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000; // Allow 30 seconds to terminate the connection cleanly.\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|url.Url|url.URL)} address The URL to which to connect\n   * @param {(String|String[])} protocols The subprotocols\n   * @param {Object} options Connection options\n   */\n  constructor (address, protocols, options) {\n    super();\n\n    this.readyState = WebSocket.CONNECTING;\n    this.protocol = '';\n\n    this._binaryType = constants.BINARY_TYPES[0];\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._closeCode = 1006;\n    this._extensions = {};\n    this._isServer = true;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient.call(this, address, protocols, options);\n    }\n  }\n\n  get CONNECTING () { return WebSocket.CONNECTING; }\n  get CLOSING () { return WebSocket.CLOSING; }\n  get CLOSED () { return WebSocket.CLOSED; }\n  get OPEN () { return WebSocket.OPEN; }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the required\n   * default \"blob\" type (instead we define a custom \"nodebuffer\" type).\n   *\n   * @type {String}\n   */\n  get binaryType () {\n    return this._binaryType;\n  }\n\n  set binaryType (type) {\n    if (constants.BINARY_TYPES.indexOf(type) < 0) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount () {\n    if (!this._socket) return 0;\n\n    //\n    // `socket.bufferSize` is `undefined` if the socket is closed.\n    //\n    return (this._socket.bufferSize || 0) + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions () {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} maxPayload The maximum allowed message size\n   * @private\n   */\n  setSocket (socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this._binaryType,\n      this._extensions,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this.readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose () {\n    this.readyState = WebSocket.CLOSED;\n\n    if (!this._socket) {\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|--\u003e|close frame|--\u003e|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+--\u003e|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} code Status code explaining why the connection is closing\n   * @param {String} data A string explaining why the connection is closing\n   * @public\n   */\n  close (code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (this._closeFrameSent && this._closeFrameReceived) this._socket.end();\n      return;\n    }\n\n    this.readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (this._socket.writable) {\n        if (this._closeFrameReceived) this._socket.end();\n\n        //\n        // Ensure that the connection is closed even if the closing handshake\n        // fails.\n        //\n        this._closeTimer = setTimeout(\n          this._socket.destroy.bind(this._socket),\n          closeTimeout\n        );\n      }\n    });\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} data The data to send\n   * @param {Boolean} mask Indicates whether or not to mask `data`\n   * @param {Function} cb Callback which is executed when the ping is sent\n   * @public\n   */\n  ping (data, mask, cb) {\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (this.readyState !== WebSocket.OPEN) {\n      const err = new Error(\n        `WebSocket is not open: readyState ${this.readyState} ` +\n          `(${readyStates[this.readyState]})`\n      );\n\n      if (cb) return cb(err);\n      throw err;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || constants.EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} data The data to send\n   * @param {Boolean} mask Indicates whether or not to mask `data`\n   * @param {Function} cb Callback which is executed when the pong is sent\n   * @public\n   */\n  pong (data, mask, cb) {\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (this.readyState !== WebSocket.OPEN) {\n      const err = new Error(\n        `WebSocket is not open: readyState ${this.readyState} ` +\n          `(${readyStates[this.readyState]})`\n      );\n\n      if (cb) return cb(err);\n      throw err;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || constants.EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} options.compress Specifies whether or not to compress `data`\n   * @param {Boolean} options.binary Specifies whether `data` is binary or text\n   * @param {Boolean} options.fin Specifies whether the fragment is the last one\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback which is executed when data is written out\n   * @public\n   */\n  send (data, options, cb) {\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (this.readyState !== WebSocket.OPEN) {\n      const err = new Error(\n        `WebSocket is not open: readyState ${this.readyState} ` +\n          `(${readyStates[this.readyState]})`\n      );\n\n      if (cb) return cb(err);\n      throw err;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    const opts = Object.assign({\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true\n    }, options);\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || constants.EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate () {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this.readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\nreadyStates.forEach((readyState, i) => {\n  WebSocket[readyStates[i]] = i;\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    /**\n     * Return the listener of the event.\n     *\n     * @return {(Function|undefined)} The event listener or `undefined`\n     * @public\n     */\n    get () {\n      const listeners = this.listeners(method);\n      for (var i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n    },\n    /**\n     * Add a listener for the event.\n     *\n     * @param {Function} listener The listener to add\n     * @public\n     */\n    set (listener) {\n      const listeners = this.listeners(method);\n      for (var i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = EventTarget.addEventListener;\nWebSocket.prototype.removeEventListener = EventTarget.removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {(String|url.Url|url.URL)} address The URL to which to connect\n * @param {String} protocols The subprotocols\n * @param {Object} options Connection options\n * @param {(Boolean|Object)} options.perMessageDeflate Enable/disable permessage-deflate\n * @param {Number} options.handshakeTimeout Timeout in milliseconds for the handshake request\n * @param {Number} options.protocolVersion Value of the `Sec-WebSocket-Version` header\n * @param {String} options.origin Value of the `Origin` or `Sec-WebSocket-Origin` header\n * @private\n */\nfunction initAsClient (address, protocols, options) {\n  options = Object.assign({\n    protocolVersion: protocolVersions[1],\n    perMessageDeflate: true\n  }, options, {\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    auth: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  });\n\n  if (protocolVersions.indexOf(options.protocolVersion) === -1) {\n    throw new RangeError(\n      `Unsupported protocol version: ${options.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  this._isServer = false;\n\n  var parsedUrl;\n\n  if (typeof address === 'object' && address.href !== undefined) {\n    parsedUrl = address;\n    this.url = address.href;\n  } else {\n    parsedUrl = url.parse(address);\n    this.url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    throw new Error(`Invalid URL: ${this.url}`);\n  }\n\n  const isSecure = parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const key = crypto.randomBytes(16).toString('base64');\n  const httpObj = isSecure ? https : http;\n  const path = parsedUrl.search\n    ? `${parsedUrl.pathname || '/'}${parsedUrl.search}`\n    : parsedUrl.pathname || '/';\n  var perMessageDeflate;\n\n  options.createConnection = isSecure ? tlsConnect : netConnect;\n  options.port = parsedUrl.port || (isSecure ? 443 : 80);\n  options.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  options.headers = Object.assign({\n    'Sec-WebSocket-Version': options.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    'Connection': 'Upgrade',\n    'Upgrade': 'websocket'\n  }, options.headers);\n  options.path = path;\n\n  if (options.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      options.perMessageDeflate !== true ? options.perMessageDeflate : {},\n      false\n    );\n    options.headers['Sec-WebSocket-Extensions'] = extension.format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    options.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (options.origin) {\n    if (options.protocolVersion < 13) {\n      options.headers['Sec-WebSocket-Origin'] = options.origin;\n    } else {\n      options.headers.Origin = options.origin;\n    }\n  }\n  if (parsedUrl.auth) {\n    options.auth = parsedUrl.auth;\n  } else if (parsedUrl.username || parsedUrl.password) {\n    options.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = path.split(':');\n\n    if (options.agent == null && process.versions.modules < 57) {\n      //\n      // Setting `socketPath` in conjunction with `createConnection` without an\n      // agent throws an error on Node.js < 8. Work around the issue by using a\n      // different property.\n      //\n      options._socketPath = parts[0];\n    } else {\n      options.socketPath = parts[0];\n    }\n\n    options.path = parts[1];\n  }\n\n  var req = this._req = httpObj.get(options);\n\n  if (options.handshakeTimeout) {\n    req.setTimeout(\n      options.handshakeTimeout,\n      () => abortHandshake(this, req, 'Opening handshake has timed out')\n    );\n  }\n\n  req.on('error', (err) => {\n    if (this._req.aborted) return;\n\n    req = this._req = null;\n    this.readyState = WebSocket.CLOSING;\n    this.emit('error', err);\n    this.emitClose();\n  });\n\n  req.on('response', (res) => {\n    if (this.emit('unexpected-response', req, res)) return;\n\n    abortHandshake(this, req, `Unexpected server response: ${res.statusCode}`);\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    this.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (this.readyState !== WebSocket.CONNECTING) return;\n\n    req = this._req = null;\n\n    const digest = crypto.createHash('sha1')\n      .update(key + constants.GUID, 'binary')\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(this, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    var protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && protList.indexOf(serverProt) === -1) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(this, socket, protError);\n      return;\n    }\n\n    if (serverProt) this.protocol = serverProt;\n\n    if (perMessageDeflate) {\n      try {\n        const extensions = extension.parse(\n          res.headers['sec-websocket-extensions']\n        );\n\n        if (extensions[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(\n            extensions[PerMessageDeflate.extensionName]\n          );\n          this._extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        abortHandshake(this, socket, 'Invalid Sec-WebSocket-Extensions header');\n        return;\n      }\n    }\n\n    this.setSocket(socket, head, 0);\n  });\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect (options) {\n  options.path = options.socketPath || options._socketPath || undefined;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect (options) {\n  options.path = options.socketPath || options._socketPath || undefined;\n  options.servername = options.servername || options.host;\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket)} stream The request to abort or the\n *     socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake (websocket, stream, message) {\n  websocket.readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude (code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._socket.removeListener('data', socketOnData);\n  websocket._socket.resume();\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain () {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError (err) {\n  const websocket = this[kWebSocket];\n\n  websocket._socket.removeListener('data', socketOnData);\n\n  websocket.readyState = WebSocket.CLOSING;\n  websocket._closeCode = err[constants.kStatusCode];\n  websocket.emit('error', err);\n  websocket._socket.destroy();\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish () {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage (data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing (data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, constants.NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong (data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose () {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('end', socketOnEnd);\n\n  websocket.readyState = WebSocket.CLOSING;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk and emitted synchronously in a single\n  // `'data'` event.\n  //\n  websocket._socket.read();\n  websocket._receiver.end();\n\n  this.removeListener('data', socketOnData);\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData (chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd () {\n  const websocket = this[kWebSocket];\n\n  websocket.readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError () {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', constants.NOOP);\n\n  if (websocket) {\n    websocket.readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","initAsClient","address","protocols","options","Object","assign","protocolVersion","protocolVersions","perMessageDeflate","createConnection","undefined","socketPath","hostname","protocol","timeout","method","auth","host","path","port","indexOf","RangeError","join","_isServer","href","parsedUrl","url","parse","isUnixSocket","pathname","Error","isSecure","key","crypto","randomBytes","toString","httpObj","https","http","search","tlsConnect","netConnect","startsWith","slice","headers","PerMessageDeflate","extension","format","extensionName","offer","origin","Origin","username","password","parts","split","agent","process","versions","modules","_socketPath","req","_req","get","handshakeTimeout","setTimeout","abortHandshake","on","err","aborted","readyState","WebSocket","CLOSING","emit","emitClose","res","statusCode","socket","head","CONNECTING","digest","createHash","update","constants","GUID","serverProt","protList","protError","extensions","accept","_extensions","setSocket","net","connect","servername","tls","websocket","stream","message","captureStackTrace","setHeader","abort","once","bind","destroy","receiverOnConclude","code","reason","kWebSocket","_socket","removeListener","socketOnData","resume","_closeFrameReceived","_closeMessage","_closeCode","close","receiverOnDrain","receiverOnError","kStatusCode","receiverOnFinish","receiverOnMessage","data","receiverOnPing","pong","NOOP","receiverOnPong","socketOnClose","socketOnEnd","read","_receiver","end","clearTimeout","_closeTimer","_writableState","finished","errorEmitted","chunk","write","pause","socketOnError","EventEmitter","EventTarget","Receiver","Sender","readyStates","constructor","_binaryType","BINARY_TYPES","_closeFrameSent","_sender","Array","isArray","call","CLOSED","OPEN","type","bufferSize","_bufferedBytes","keys","maxPayload","receiver","setNoDelay","length","unshift","cleanup","removeAllListeners","msg","writable","closeTimeout","ping","mask","cb","EMPTY_BUFFER","send","opts","binary","compress","fin","terminate","forEach","i","defineProperty","prototype","listeners","_listener","set","listener","addEventListener","removeEventListener"]
}
