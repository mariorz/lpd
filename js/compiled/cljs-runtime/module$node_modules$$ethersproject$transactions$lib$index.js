shadow$provide.module$node_modules$$ethersproject$transactions$lib$index=function(global,require,module,exports){function handleNumber(value){return"0x"===value?constants_1.Zero:bignumber_1.BigNumber.from(value)}function computeAddress(key){key=signing_key_1.computePublicKey(key);return address_1.getAddress(bytes_1.hexDataSlice(keccak256_1.keccak256(bytes_1.hexDataSlice(key,1)),12))}function recoverAddress(digest,signature){return computeAddress(signing_key_1.recoverPublicKey(bytes_1.arrayify(digest),
signature))}var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k);o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o["default"]=v});global=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};
if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:!0});exports.parse=exports.serialize=exports.recoverAddress=exports.computeAddress=void 0;var address_1=require("module$node_modules$$ethersproject$address$lib$index"),bignumber_1=require("module$node_modules$$ethersproject$bignumber$lib$index"),bytes_1=require("module$node_modules$$ethersproject$bytes$lib$index"),
constants_1=require("module$node_modules$$ethersproject$constants$lib$index"),keccak256_1=require("module$node_modules$$ethersproject$keccak256$lib$index"),properties_1=require("module$node_modules$$ethersproject$properties$lib$index"),RLP=global(require("module$node_modules$$ethersproject$rlp$lib$index")),signing_key_1=require("module$node_modules$$ethersproject$signing_key$lib$index");global=require("module$node_modules$$ethersproject$logger$lib$index");require=require("module$node_modules$$ethersproject$transactions$lib$_version");
var logger=new global.Logger(require.version),transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0};exports.computeAddress=computeAddress;exports.recoverAddress=recoverAddress;exports.serialize=function(transaction,signature){properties_1.checkProperties(transaction,
allowedTransactionKeys);var raw=[];transactionFields.forEach(function(fieldInfo){var value=transaction[fieldInfo.name]||[],options={};fieldInfo.numeric&&(options.hexPad="left");value=bytes_1.arrayify(bytes_1.hexlify(value,options));fieldInfo.length&&value.length!==fieldInfo.length&&0<value.length&&logger.throwArgumentError("invalid length for "+fieldInfo.name,"transaction:"+fieldInfo.name,value);fieldInfo.maxLength&&(value=bytes_1.stripZeros(value),value.length>fieldInfo.maxLength&&logger.throwArgumentError("invalid length for "+
fieldInfo.name,"transaction:"+fieldInfo.name,value));raw.push(bytes_1.hexlify(value))});var chainId=0;null!=transaction.chainId?(chainId=transaction.chainId,"number"!==typeof chainId&&logger.throwArgumentError("invalid transaction.chainId","transaction",transaction)):signature&&!bytes_1.isBytesLike(signature)&&28<signature.v&&(chainId=Math.floor((signature.v-35)/2));0!==chainId&&(raw.push(bytes_1.hexlify(chainId)),raw.push("0x"),raw.push("0x"));if(!signature)return RLP.encode(raw);var sig=bytes_1.splitSignature(signature),
v=27+sig.recoveryParam;0!==chainId?(raw.pop(),raw.pop(),raw.pop(),v+=2*chainId+8,28<sig.v&&sig.v!==v&&logger.throwArgumentError("transaction.chainId/signature.v mismatch","signature",signature)):sig.v!==v&&logger.throwArgumentError("transaction.chainId/signature.v mismatch","signature",signature);raw.push(bytes_1.hexlify(v));raw.push(bytes_1.stripZeros(bytes_1.arrayify(sig.r)));raw.push(bytes_1.stripZeros(bytes_1.arrayify(sig.s)));return RLP.encode(raw)};exports.parse=function(rawTransaction){var transaction=
RLP.decode(rawTransaction);9!==transaction.length&&6!==transaction.length&&logger.throwArgumentError("invalid raw transaction","rawTransaction",rawTransaction);var JSCompiler_temp_const=handleNumber(transaction[0]).toNumber(),JSCompiler_temp_const$jscomp$0=handleNumber(transaction[1]),JSCompiler_temp_const$jscomp$1=handleNumber(transaction[2]);var JSCompiler_inline_result=transaction[3];JSCompiler_inline_result="0x"===JSCompiler_inline_result?null:address_1.getAddress(JSCompiler_inline_result);JSCompiler_temp_const=
{nonce:JSCompiler_temp_const,gasPrice:JSCompiler_temp_const$jscomp$0,gasLimit:JSCompiler_temp_const$jscomp$1,to:JSCompiler_inline_result,value:handleNumber(transaction[4]),data:transaction[5],chainId:0};if(6===transaction.length)return JSCompiler_temp_const;try{JSCompiler_temp_const.v=bignumber_1.BigNumber.from(transaction[6]).toNumber()}catch(error){return console.log(error),JSCompiler_temp_const}JSCompiler_temp_const.r=bytes_1.hexZeroPad(transaction[7],32);JSCompiler_temp_const.s=bytes_1.hexZeroPad(transaction[8],
32);if(bignumber_1.BigNumber.from(JSCompiler_temp_const.r).isZero()&&bignumber_1.BigNumber.from(JSCompiler_temp_const.s).isZero())JSCompiler_temp_const.chainId=JSCompiler_temp_const.v,JSCompiler_temp_const.v=0;else{JSCompiler_temp_const.chainId=Math.floor((JSCompiler_temp_const.v-35)/2);0>JSCompiler_temp_const.chainId&&(JSCompiler_temp_const.chainId=0);JSCompiler_temp_const$jscomp$0=JSCompiler_temp_const.v-27;transaction=transaction.slice(0,6);0!==JSCompiler_temp_const.chainId&&(transaction.push(bytes_1.hexlify(JSCompiler_temp_const.chainId)),
transaction.push("0x"),transaction.push("0x"),JSCompiler_temp_const$jscomp$0-=2*JSCompiler_temp_const.chainId+8);transaction=keccak256_1.keccak256(RLP.encode(transaction));try{JSCompiler_temp_const.from=recoverAddress(transaction,{r:bytes_1.hexlify(JSCompiler_temp_const.r),s:bytes_1.hexlify(JSCompiler_temp_const.s),recoveryParam:JSCompiler_temp_const$jscomp$0})}catch(error){console.log(error)}JSCompiler_temp_const.hash=keccak256_1.keccak256(rawTransaction)}return JSCompiler_temp_const}}
//# sourceMappingURL=module$node_modules$$ethersproject$transactions$lib$index.js.map
