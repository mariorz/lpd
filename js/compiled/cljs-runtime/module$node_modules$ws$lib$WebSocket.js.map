{
"version":3,
"file":"module$node_modules$ws$lib$WebSocket.js",
"lineCount":25,
"mappings":"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",
"sources":["node_modules/ws/lib/WebSocket.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ws$lib$WebSocket\"] = function(global,require,module,exports) {\n/*!\n * ws: a node.js websocket client\n * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>\n * MIT Licensed\n */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst crypto = require('crypto');\nconst Ultron = require('ultron');\nconst https = require('https');\nconst http = require('http');\nconst url = require('url');\n\nconst PerMessageDeflate = require('./PerMessageDeflate');\nconst EventTarget = require('./EventTarget');\nconst Extensions = require('./Extensions');\nconst constants = require('./Constants');\nconst Receiver = require('./Receiver');\nconst Sender = require('./Sender');\n\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000; // Allow 30 seconds to terminate the connection cleanly.\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {String} address The URL to which to connect\n   * @param {(String|String[])} protocols The subprotocols\n   * @param {Object} options Connection options\n   */\n  constructor (address, protocols, options) {\n    super();\n\n    if (!protocols) {\n      protocols = [];\n    } else if (typeof protocols === 'string') {\n      protocols = [protocols];\n    } else if (!Array.isArray(protocols)) {\n      options = protocols;\n      protocols = [];\n    }\n\n    this.readyState = WebSocket.CONNECTING;\n    this.bytesReceived = 0;\n    this.extensions = {};\n    this.protocol = '';\n\n    this._binaryType = constants.BINARY_TYPES[0];\n    this._finalize = this.finalize.bind(this);\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._finalized = false;\n    this._closeCode = 1006;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n    this._ultron = null;\n\n    if (Array.isArray(address)) {\n      initAsServerClient.call(this, address[0], address[1], options);\n    } else {\n      initAsClient.call(this, address, protocols, options);\n    }\n  }\n\n  get CONNECTING () { return WebSocket.CONNECTING; }\n  get CLOSING () { return WebSocket.CLOSING; }\n  get CLOSED () { return WebSocket.CLOSED; }\n  get OPEN () { return WebSocket.OPEN; }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount () {\n    var amount = 0;\n\n    if (this._socket) {\n      amount = this._socket.bufferSize + this._sender._bufferedBytes;\n    }\n    return amount;\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the required\n   * default \"blob\" type (instead we define a custom \"nodebuffer\" type).\n   *\n   * @type {String}\n   */\n  get binaryType () {\n    return this._binaryType;\n  }\n\n  set binaryType (type) {\n    if (constants.BINARY_TYPES.indexOf(type) < 0) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {net.Socket} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @private\n   */\n  setSocket (socket, head) {\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    this._receiver = new Receiver(this.extensions, this._maxPayload, this.binaryType);\n    this._sender = new Sender(socket, this.extensions);\n    this._ultron = new Ultron(socket);\n    this._socket = socket;\n\n    this._ultron.on('close', this._finalize);\n    this._ultron.on('error', this._finalize);\n    this._ultron.on('end', this._finalize);\n\n    if (head.length > 0) socket.unshift(head);\n\n    this._ultron.on('data', (data) => {\n      this.bytesReceived += data.length;\n      this._receiver.add(data);\n    });\n\n    this._receiver.onmessage = (data) => this.emit('message', data);\n    this._receiver.onping = (data) => {\n      this.pong(data, !this._isServer, true);\n      this.emit('ping', data);\n    };\n    this._receiver.onpong = (data) => this.emit('pong', data);\n    this._receiver.onclose = (code, reason) => {\n      this._closeFrameReceived = true;\n      this._closeMessage = reason;\n      this._closeCode = code;\n      if (!this._finalized) this.close(code, reason);\n    };\n    this._receiver.onerror = (error, code) => {\n      this._closeMessage = '';\n      this._closeCode = code;\n\n      //\n      // Ensure that the error is emitted even if `WebSocket#finalize()` has\n      // already been called.\n      //\n      this.readyState = WebSocket.CLOSING;\n      this.emit('error', error);\n      this.finalize(true);\n    };\n\n    this.readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Clean up and release internal resources.\n   *\n   * @param {(Boolean|Error)} error Indicates whether or not an error occurred\n   * @private\n   */\n  finalize (error) {\n    if (this._finalized) return;\n\n    this.readyState = WebSocket.CLOSING;\n    this._finalized = true;\n\n    if (typeof error === 'object') this.emit('error', error);\n    if (!this._socket) return this.emitClose();\n\n    clearTimeout(this._closeTimer);\n    this._closeTimer = null;\n\n    this._ultron.destroy();\n    this._ultron = null;\n\n    this._socket.on('error', constants.NOOP);\n\n    if (!error) this._socket.end();\n    else this._socket.destroy();\n\n    this._socket = null;\n    this._sender = null;\n\n    this._receiver.cleanup(() => this.emitClose());\n    this._receiver = null;\n  }\n\n  /**\n   * Emit the `close` event.\n   *\n   * @private\n   */\n  emitClose () {\n    this.readyState = WebSocket.CLOSED;\n\n    this.emit('close', this._closeCode, this._closeMessage);\n\n    if (this.extensions[PerMessageDeflate.extensionName]) {\n      this.extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this.extensions = null;\n\n    this.removeAllListeners();\n  }\n\n  /**\n   * Pause the socket stream.\n   *\n   * @public\n   */\n  pause () {\n    if (this.readyState !== WebSocket.OPEN) throw new Error('not opened');\n\n    this._socket.pause();\n  }\n\n  /**\n   * Resume the socket stream\n   *\n   * @public\n   */\n  resume () {\n    if (this.readyState !== WebSocket.OPEN) throw new Error('not opened');\n\n    this._socket.resume();\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *            +----------+     +-----------+   +----------+\n   *     + - - -|ws.close()|----\u003e|close frame|--\u003e|ws.close()|- - - -\n   *            +----------+     +-----------+   +----------+       |\n   *     |      +----------+     +-----------+         |\n   *            |ws.close()|<----|close frame|<--------+            |\n   *            +----------+     +-----------+         |\n   *  CLOSING         |              +---+             |         CLOSING\n   *                  |          +---|fin|<------------+\n   *     |            |          |   +---+                          |\n   *                  |          |   +---+      +-------------+\n   *     |            +----------+--\u003e|fin|-----\u003e|ws.finalize()| - - +\n   *                             |   +---+      +-------------+\n   *     |     +-------------+   |\n   *      - - -|ws.finalize()|<--+\n   *           +-------------+\n   *\n   * @param {Number} code Status code explaining why the connection is closing\n   * @param {String} data A string explaining why the connection is closing\n   * @public\n   */\n  close (code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      this._req.abort();\n      this.finalize(new Error('closed before the connection is established'));\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (this._closeFrameSent && this._closeFrameReceived) this._socket.end();\n      return;\n    }\n\n    this.readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (!this._finalized) {\n        if (this._closeFrameReceived) this._socket.end();\n\n        //\n        // Ensure that the connection is cleaned up even when the closing\n        // handshake fails.\n        //\n        this._closeTimer = setTimeout(this._finalize, closeTimeout, true);\n      }\n    });\n  }\n\n  /**\n   * Send a ping message.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Indicates whether or not to mask `data`\n   * @param {Boolean} failSilently Indicates whether or not to throw if `readyState` isn't `OPEN`\n   * @public\n   */\n  ping (data, mask, failSilently) {\n    if (this.readyState !== WebSocket.OPEN) {\n      if (failSilently) return;\n      throw new Error('not opened');\n    }\n\n    if (typeof data === 'number') data = data.toString();\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || constants.EMPTY_BUFFER, mask);\n  }\n\n  /**\n   * Send a pong message.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} mask Indicates whether or not to mask `data`\n   * @param {Boolean} failSilently Indicates whether or not to throw if `readyState` isn't `OPEN`\n   * @public\n   */\n  pong (data, mask, failSilently) {\n    if (this.readyState !== WebSocket.OPEN) {\n      if (failSilently) return;\n      throw new Error('not opened');\n    }\n\n    if (typeof data === 'number') data = data.toString();\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || constants.EMPTY_BUFFER, mask);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} options.compress Specifies whether or not to compress `data`\n   * @param {Boolean} options.binary Specifies whether `data` is binary or text\n   * @param {Boolean} options.fin Specifies whether the fragment is the last one\n   * @param {Boolean} options.mask Specifies whether or not to mask `data`\n   * @param {Function} cb Callback which is executed when data is written out\n   * @public\n   */\n  send (data, options, cb) {\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (this.readyState !== WebSocket.OPEN) {\n      if (cb) cb(new Error('not opened'));\n      else throw new Error('not opened');\n      return;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    const opts = Object.assign({\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true\n    }, options);\n\n    if (!this.extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || constants.EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate () {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      this._req.abort();\n      this.finalize(new Error('closed before the connection is established'));\n      return;\n    }\n\n    this.finalize(true);\n  }\n}\n\nWebSocket.CONNECTING = 0;\nWebSocket.OPEN = 1;\nWebSocket.CLOSING = 2;\nWebSocket.CLOSED = 3;\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    /**\n     * Return the listener of the event.\n     *\n     * @return {(Function|undefined)} The event listener or `undefined`\n     * @public\n     */\n    get () {\n      const listeners = this.listeners(method);\n      for (var i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n    },\n    /**\n     * Add a listener for the event.\n     *\n     * @param {Function} listener The listener to add\n     * @public\n     */\n    set (listener) {\n      const listeners = this.listeners(method);\n      for (var i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = EventTarget.addEventListener;\nWebSocket.prototype.removeEventListener = EventTarget.removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket server client.\n *\n * @param {http.IncomingMessage} req The request object\n * @param {net.Socket} socket The network socket between the server and client\n * @param {Buffer} head The first packet of the upgraded stream\n * @param {Object} options WebSocket attributes\n * @param {Number} options.protocolVersion The WebSocket protocol version\n * @param {Object} options.extensions The negotiated extensions\n * @param {Number} options.maxPayload The maximum allowed message size\n * @param {String} options.protocol The chosen subprotocol\n * @private\n */\nfunction initAsServerClient (socket, head, options) {\n  this.protocolVersion = options.protocolVersion;\n  this._maxPayload = options.maxPayload;\n  this.extensions = options.extensions;\n  this.protocol = options.protocol;\n\n  this._isServer = true;\n\n  this.setSocket(socket, head);\n}\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {String} address The URL to which to connect\n * @param {String[]} protocols The list of subprotocols\n * @param {Object} options Connection options\n * @param {String} options.protocol Value of the `Sec-WebSocket-Protocol` header\n * @param {(Boolean|Object)} options.perMessageDeflate Enable/disable permessage-deflate\n * @param {Number} options.handshakeTimeout Timeout in milliseconds for the handshake request\n * @param {String} options.localAddress Local interface to bind for network connections\n * @param {Number} options.protocolVersion Value of the `Sec-WebSocket-Version` header\n * @param {Object} options.headers An object containing request headers\n * @param {String} options.origin Value of the `Origin` or `Sec-WebSocket-Origin` header\n * @param {http.Agent} options.agent Use the specified Agent\n * @param {String} options.host Value of the `Host` header\n * @param {Number} options.family IP address family to use during hostname lookup (4 or 6).\n * @param {Function} options.checkServerIdentity A function to validate the server hostname\n * @param {Boolean} options.rejectUnauthorized Verify or not the server certificate\n * @param {String} options.passphrase The passphrase for the private key or pfx\n * @param {String} options.ciphers The ciphers to use or exclude\n * @param {String} options.ecdhCurve The curves for ECDH key agreement to use or exclude\n * @param {(String|String[]|Buffer|Buffer[])} options.cert The certificate key\n * @param {(String|String[]|Buffer|Buffer[])} options.key The private key\n * @param {(String|Buffer)} options.pfx The private key, certificate, and CA certs\n * @param {(String|String[]|Buffer|Buffer[])} options.ca Trusted certificates\n * @private\n */\nfunction initAsClient (address, protocols, options) {\n  options = Object.assign({\n    protocolVersion: protocolVersions[1],\n    protocol: protocols.join(','),\n    perMessageDeflate: true,\n    handshakeTimeout: null,\n    localAddress: null,\n    headers: null,\n    family: null,\n    origin: null,\n    agent: null,\n    host: null,\n\n    //\n    // SSL options.\n    //\n    checkServerIdentity: null,\n    rejectUnauthorized: null,\n    passphrase: null,\n    ciphers: null,\n    ecdhCurve: null,\n    cert: null,\n    key: null,\n    pfx: null,\n    ca: null\n  }, options);\n\n  if (protocolVersions.indexOf(options.protocolVersion) === -1) {\n    throw new Error(\n      `unsupported protocol version: ${options.protocolVersion} ` +\n      `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  this.protocolVersion = options.protocolVersion;\n  this._isServer = false;\n  this.url = address;\n\n  const serverUrl = url.parse(address);\n  const isUnixSocket = serverUrl.protocol === 'ws+unix:';\n\n  if (!serverUrl.host && (!isUnixSocket || !serverUrl.path)) {\n    throw new Error('invalid url');\n  }\n\n  const isSecure = serverUrl.protocol === 'wss:' || serverUrl.protocol === 'https:';\n  const key = crypto.randomBytes(16).toString('base64');\n  const httpObj = isSecure ? https : http;\n  var perMessageDeflate;\n\n  const requestOptions = {\n    port: serverUrl.port || (isSecure ? 443 : 80),\n    host: serverUrl.hostname,\n    path: '/',\n    headers: {\n      'Sec-WebSocket-Version': options.protocolVersion,\n      'Sec-WebSocket-Key': key,\n      'Connection': 'Upgrade',\n      'Upgrade': 'websocket'\n    }\n  };\n\n  if (options.headers) Object.assign(requestOptions.headers, options.headers);\n  if (options.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      options.perMessageDeflate !== true ? options.perMessageDeflate : {},\n      false\n    );\n    requestOptions.headers['Sec-WebSocket-Extensions'] = Extensions.format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (options.protocol) {\n    requestOptions.headers['Sec-WebSocket-Protocol'] = options.protocol;\n  }\n  if (options.origin) {\n    if (options.protocolVersion < 13) {\n      requestOptions.headers['Sec-WebSocket-Origin'] = options.origin;\n    } else {\n      requestOptions.headers.Origin = options.origin;\n    }\n  }\n  if (options.host) requestOptions.headers.Host = options.host;\n  if (serverUrl.auth) requestOptions.auth = serverUrl.auth;\n\n  if (options.localAddress) requestOptions.localAddress = options.localAddress;\n  if (options.family) requestOptions.family = options.family;\n\n  if (isUnixSocket) {\n    const parts = serverUrl.path.split(':');\n\n    requestOptions.socketPath = parts[0];\n    requestOptions.path = parts[1];\n  } else if (serverUrl.path) {\n    //\n    // Make sure that path starts with `/`.\n    //\n    if (serverUrl.path.charAt(0) !== '/') {\n      requestOptions.path = `/${serverUrl.path}`;\n    } else {\n      requestOptions.path = serverUrl.path;\n    }\n  }\n\n  var agent = options.agent;\n\n  //\n  // A custom agent is required for these options.\n  //\n  if (\n    options.rejectUnauthorized != null ||\n    options.checkServerIdentity ||\n    options.passphrase ||\n    options.ciphers ||\n    options.ecdhCurve ||\n    options.cert ||\n    options.key ||\n    options.pfx ||\n    options.ca\n  ) {\n    if (options.passphrase) requestOptions.passphrase = options.passphrase;\n    if (options.ciphers) requestOptions.ciphers = options.ciphers;\n    if (options.ecdhCurve) requestOptions.ecdhCurve = options.ecdhCurve;\n    if (options.cert) requestOptions.cert = options.cert;\n    if (options.key) requestOptions.key = options.key;\n    if (options.pfx) requestOptions.pfx = options.pfx;\n    if (options.ca) requestOptions.ca = options.ca;\n    if (options.checkServerIdentity) {\n      requestOptions.checkServerIdentity = options.checkServerIdentity;\n    }\n    if (options.rejectUnauthorized != null) {\n      requestOptions.rejectUnauthorized = options.rejectUnauthorized;\n    }\n\n    if (!agent) agent = new httpObj.Agent(requestOptions);\n  }\n\n  if (agent) requestOptions.agent = agent;\n\n  this._req = httpObj.get(requestOptions);\n\n  if (options.handshakeTimeout) {\n    this._req.setTimeout(options.handshakeTimeout, () => {\n      this._req.abort();\n      this.finalize(new Error('opening handshake has timed out'));\n    });\n  }\n\n  this._req.on('error', (error) => {\n    if (this._req.aborted) return;\n\n    this._req = null;\n    this.finalize(error);\n  });\n\n  this._req.on('response', (res) => {\n    if (!this.emit('unexpected-response', this._req, res)) {\n      this._req.abort();\n      this.finalize(new Error(`unexpected server response (${res.statusCode})`));\n    }\n  });\n\n  this._req.on('upgrade', (res, socket, head) => {\n    this.emit('headers', res.headers, res);\n\n    //\n    // The user may have closed the connection from a listener of the `headers`\n    // event.\n    //\n    if (this.readyState !== WebSocket.CONNECTING) return;\n\n    this._req = null;\n\n    const digest = crypto.createHash('sha1')\n      .update(key + constants.GUID, 'binary')\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      socket.destroy();\n      return this.finalize(new Error('invalid server key'));\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (options.protocol || '').split(/, */);\n    var protError;\n\n    if (!options.protocol && serverProt) {\n      protError = 'server sent a subprotocol even though none requested';\n    } else if (options.protocol && !serverProt) {\n      protError = 'server sent no subprotocol even though requested';\n    } else if (serverProt && protList.indexOf(serverProt) === -1) {\n      protError = 'server responded with an invalid protocol';\n    }\n\n    if (protError) {\n      socket.destroy();\n      return this.finalize(new Error(protError));\n    }\n\n    if (serverProt) this.protocol = serverProt;\n\n    if (perMessageDeflate) {\n      try {\n        const serverExtensions = Extensions.parse(\n          res.headers['sec-websocket-extensions']\n        );\n\n        if (serverExtensions[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(\n            serverExtensions[PerMessageDeflate.extensionName]\n          );\n          this.extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        socket.destroy();\n        this.finalize(new Error('invalid Sec-WebSocket-Extensions header'));\n        return;\n      }\n    }\n\n    this.setSocket(socket, head);\n  });\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","initAsServerClient","socket","head","options","protocolVersion","_maxPayload","maxPayload","extensions","protocol","_isServer","setSocket","initAsClient","address","protocols","Object","assign","protocolVersions","join","perMessageDeflate","handshakeTimeout","localAddress","headers","family","origin","agent","host","checkServerIdentity","rejectUnauthorized","passphrase","ciphers","ecdhCurve","cert","key","pfx","ca","indexOf","Error","url","serverUrl","parse","isUnixSocket","path","isSecure","crypto","randomBytes","toString","httpObj","https","http","requestOptions","port","hostname","PerMessageDeflate","Extensions","format","extensionName","offer","Origin","Host","auth","parts","split","socketPath","charAt","Agent","_req","get","setTimeout","abort","finalize","on","error","aborted","res","emit","statusCode","readyState","WebSocket","CONNECTING","digest","createHash","update","constants","GUID","destroy","serverProt","protList","protError","serverExtensions","accept","err","EventEmitter","Ultron","EventTarget","Receiver","Sender","constructor","Array","isArray","bytesReceived","_binaryType","BINARY_TYPES","_finalize","bind","_closeFrameReceived","_closeFrameSent","_closeMessage","_closeTimer","_finalized","_closeCode","_receiver","_sender","_socket","_ultron","call","setNoDelay","binaryType","length","unshift","data","add","onmessage","this._receiver.onmessage","onping","this._receiver.onping","pong","onpong","this._receiver.onpong","onclose","this._receiver.onclose","code","reason","close","onerror","this._receiver.onerror","CLOSING","OPEN","emitClose","clearTimeout","NOOP","end","cleanup","CLOSED","removeAllListeners","pause","resume","closeTimeout","ping","mask","failSilently","undefined","EMPTY_BUFFER","send","cb","opts","binary","compress","fin","terminate","bufferedAmount","amount","bufferSize","_bufferedBytes","type","forEach","method","defineProperty","prototype","listeners","i","_listener","set","listener","removeListener","addEventListener","removeEventListener"]
}
