{
"version":3,
"file":"module$node_modules$asn1_DOT_js$lib$asn1$encoders$der.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/asn1_DOT_js/lib/asn1/encoders/der.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$asn1_DOT_js$lib$asn1$encoders$der\"] = function(global,require,module,exports) {\n'use strict';\n\nconst inherits = require('inherits');\nconst Buffer = require('safer-buffer').Buffer;\nconst Node = require('../base/node');\n\n// Import DER constants\nconst der = require('../constants/der');\n\nfunction DEREncoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n}\nmodule.exports = DEREncoder;\n\nDEREncoder.prototype.encode = function encode(data, reporter) {\n  return this.tree._encode(data, reporter).join();\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  Node.call(this, 'der', parent);\n}\ninherits(DERNode, Node);\n\nDERNode.prototype._encodeComposite = function encodeComposite(tag,\n  primitive,\n  cls,\n  content) {\n  const encodedTag = encodeTag(tag, primitive, cls, this.reporter);\n\n  // Short form\n  if (content.length < 0x80) {\n    const header = Buffer.alloc(2);\n    header[0] = encodedTag;\n    header[1] = content.length;\n    return this._createEncoderBuffer([ header, content ]);\n  }\n\n  // Long form\n  // Count octets required to store length\n  let lenOctets = 1;\n  for (let i = content.length; i >= 0x100; i >>= 8)\n    lenOctets++;\n\n  const header = Buffer.alloc(1 + 1 + lenOctets);\n  header[0] = encodedTag;\n  header[1] = 0x80 | lenOctets;\n\n  for (let i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8)\n    header[i] = j & 0xff;\n\n  return this._createEncoderBuffer([ header, content ]);\n};\n\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\n  if (tag === 'bitstr') {\n    return this._createEncoderBuffer([ str.unused | 0, str.data ]);\n  } else if (tag === 'bmpstr') {\n    const buf = Buffer.alloc(str.length * 2);\n    for (let i = 0; i < str.length; i++) {\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\n    }\n    return this._createEncoderBuffer(buf);\n  } else if (tag === 'numstr') {\n    if (!this._isNumstr(str)) {\n      return this.reporter.error('Encoding of string type: numstr supports ' +\n                                 'only digits and space');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'printstr') {\n    if (!this._isPrintstr(str)) {\n      return this.reporter.error('Encoding of string type: printstr supports ' +\n                                 'only latin upper and lower case letters, ' +\n                                 'digits, space, apostrophe, left and rigth ' +\n                                 'parenthesis, plus sign, comma, hyphen, ' +\n                                 'dot, slash, colon, equal sign, ' +\n                                 'question mark');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (/str$/.test(tag)) {\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'objDesc') {\n    return this._createEncoderBuffer(str);\n  } else {\n    return this.reporter.error('Encoding of string type: ' + tag +\n                               ' unsupported');\n  }\n};\n\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\n  if (typeof id === 'string') {\n    if (!values)\n      return this.reporter.error('string objid given, but no values map found');\n    if (!values.hasOwnProperty(id))\n      return this.reporter.error('objid not found in values map');\n    id = values[id].split(/[\\s.]+/g);\n    for (let i = 0; i < id.length; i++)\n      id[i] |= 0;\n  } else if (Array.isArray(id)) {\n    id = id.slice();\n    for (let i = 0; i < id.length; i++)\n      id[i] |= 0;\n  }\n\n  if (!Array.isArray(id)) {\n    return this.reporter.error('objid() should be either array or string, ' +\n                               'got: ' + JSON.stringify(id));\n  }\n\n  if (!relative) {\n    if (id[1] >= 40)\n      return this.reporter.error('Second objid identifier OOB');\n    id.splice(0, 2, id[0] * 40 + id[1]);\n  }\n\n  // Count number of octets\n  let size = 0;\n  for (let i = 0; i < id.length; i++) {\n    let ident = id[i];\n    for (size++; ident >= 0x80; ident >>= 7)\n      size++;\n  }\n\n  const objid = Buffer.alloc(size);\n  let offset = objid.length - 1;\n  for (let i = id.length - 1; i >= 0; i--) {\n    let ident = id[i];\n    objid[offset--] = ident & 0x7f;\n    while ((ident >>= 7) > 0)\n      objid[offset--] = 0x80 | (ident & 0x7f);\n  }\n\n  return this._createEncoderBuffer(objid);\n};\n\nfunction two(num) {\n  if (num < 10)\n    return '0' + num;\n  else\n    return num;\n}\n\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\n  let str;\n  const date = new Date(time);\n\n  if (tag === 'gentime') {\n    str = [\n      two(date.getUTCFullYear()),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else if (tag === 'utctime') {\n    str = [\n      two(date.getUTCFullYear() % 100),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else {\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\n  }\n\n  return this._encodeStr(str, 'octstr');\n};\n\nDERNode.prototype._encodeNull = function encodeNull() {\n  return this._createEncoderBuffer('');\n};\n\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\n  if (typeof num === 'string') {\n    if (!values)\n      return this.reporter.error('String int or enum given, but no values map');\n    if (!values.hasOwnProperty(num)) {\n      return this.reporter.error('Values map doesn\\'t contain: ' +\n                                 JSON.stringify(num));\n    }\n    num = values[num];\n  }\n\n  // Bignum, assume big endian\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\n    const numArray = num.toArray();\n    if (!num.sign && numArray[0] & 0x80) {\n      numArray.unshift(0);\n    }\n    num = Buffer.from(numArray);\n  }\n\n  if (Buffer.isBuffer(num)) {\n    let size = num.length;\n    if (num.length === 0)\n      size++;\n\n    const out = Buffer.alloc(size);\n    num.copy(out);\n    if (num.length === 0)\n      out[0] = 0;\n    return this._createEncoderBuffer(out);\n  }\n\n  if (num < 0x80)\n    return this._createEncoderBuffer(num);\n\n  if (num < 0x100)\n    return this._createEncoderBuffer([0, num]);\n\n  let size = 1;\n  for (let i = num; i >= 0x100; i >>= 8)\n    size++;\n\n  const out = new Array(size);\n  for (let i = out.length - 1; i >= 0; i--) {\n    out[i] = num & 0xff;\n    num >>= 8;\n  }\n  if(out[0] & 0x80) {\n    out.unshift(0);\n  }\n\n  return this._createEncoderBuffer(Buffer.from(out));\n};\n\nDERNode.prototype._encodeBool = function encodeBool(value) {\n  return this._createEncoderBuffer(value ? 0xff : 0);\n};\n\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function')\n    entity = entity(obj);\n  return entity._getEncoder('der').tree;\n};\n\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\n  const state = this._baseState;\n  let i;\n  if (state['default'] === null)\n    return false;\n\n  const data = dataBuffer.join();\n  if (state.defaultBuffer === undefined)\n    state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\n\n  if (data.length !== state.defaultBuffer.length)\n    return false;\n\n  for (i=0; i < data.length; i++)\n    if (data[i] !== state.defaultBuffer[i])\n      return false;\n\n  return true;\n};\n\n// Utility methods\n\nfunction encodeTag(tag, primitive, cls, reporter) {\n  let res;\n\n  if (tag === 'seqof')\n    tag = 'seq';\n  else if (tag === 'setof')\n    tag = 'set';\n\n  if (der.tagByName.hasOwnProperty(tag))\n    res = der.tagByName[tag];\n  else if (typeof tag === 'number' && (tag | 0) === tag)\n    res = tag;\n  else\n    return reporter.error('Unknown tag: ' + tag);\n\n  if (res >= 0x1f)\n    return reporter.error('Multi-octet tag encoding unsupported');\n\n  if (!primitive)\n    res |= 0x20;\n\n  res |= (der.tagClassByName[cls || 'universal'] << 6);\n\n  return res;\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","DEREncoder","entity","enc","name","tree","DERNode","_init","body","parent","Node","call","two","num","inherits","Buffer","der","prototype","encode","DEREncoder.prototype.encode","data","reporter","_encode","join","_encodeComposite","DERNode.prototype._encodeComposite","tag","primitive","cls","content","tagByName","hasOwnProperty","res","error","tagClassByName","length","header","alloc","encodedTag","_createEncoderBuffer","lenOctets","i","j","_encodeStr","DERNode.prototype._encodeStr","str","unused","buf","writeUInt16BE","charCodeAt","_isNumstr","_isPrintstr","test","_encodeObjid","DERNode.prototype._encodeObjid","id","values","relative","split","Array","isArray","slice","JSON","stringify","splice","size","ident","objid","offset","_encodeTime","DERNode.prototype._encodeTime","time","date","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","_encodeNull","DERNode.prototype._encodeNull","_encodeInt","DERNode.prototype._encodeInt","isBuffer","numArray","toArray","sign","unshift","from","out","copy","_encodeBool","DERNode.prototype._encodeBool","value","_use","DERNode.prototype._use","obj","_getEncoder","_skipDefault","DERNode.prototype._skipDefault","dataBuffer","state","_baseState","undefined","defaultBuffer","_encodeValue"]
}
