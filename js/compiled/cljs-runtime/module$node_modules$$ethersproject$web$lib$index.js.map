{
"version":3,
"file":"module$node_modules$$ethersproject$web$lib$index.js",
"lineCount":21,
"mappings":"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",
"sources":["node_modules/@ethersproject/web/lib/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$ethersproject$web$lib$index\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.poll = exports.fetchJson = exports._fetchData = void 0;\nvar base64_1 = require(\"@ethersproject/base64\");\nvar bytes_1 = require(\"@ethersproject/bytes\");\nvar properties_1 = require(\"@ethersproject/properties\");\nvar strings_1 = require(\"@ethersproject/strings\");\nvar logger_1 = require(\"@ethersproject/logger\");\nvar _version_1 = require(\"./_version\");\nvar logger = new logger_1.Logger(_version_1.version);\nvar geturl_1 = require(\"./geturl\");\nfunction staller(duration) {\n    return new Promise(function (resolve) {\n        setTimeout(resolve, duration);\n    });\n}\nfunction bodyify(value, type) {\n    if (value == null) {\n        return null;\n    }\n    if (typeof (value) === \"string\") {\n        return value;\n    }\n    if (bytes_1.isBytesLike(value)) {\n        if (type && (type.split(\"/\")[0] === \"text\" || type.split(\";\")[0].trim() === \"application/json\")) {\n            try {\n                return strings_1.toUtf8String(value);\n            }\n            catch (error) { }\n            ;\n        }\n        return bytes_1.hexlify(value);\n    }\n    return value;\n}\n// This API is still a work in progress; the future changes will likely be:\n// - ConnectionInfo => FetchDataRequest<T = any>\n// - FetchDataRequest.body? = string | Uint8Array | { contentType: string, data: string | Uint8Array }\n//   - If string => text/plain, Uint8Array => application/octet-stream (if content-type unspecified)\n// - FetchDataRequest.processFunc = (body: Uint8Array, response: FetchDataResponse) => T\n// For this reason, it should be considered internal until the API is finalized\nfunction _fetchData(connection, body, processFunc) {\n    // How many times to retry in the event of a throttle\n    var attemptLimit = (typeof (connection) === \"object\" && connection.throttleLimit != null) ? connection.throttleLimit : 12;\n    logger.assertArgument((attemptLimit > 0 && (attemptLimit % 1) === 0), \"invalid connection throttle limit\", \"connection.throttleLimit\", attemptLimit);\n    var throttleCallback = ((typeof (connection) === \"object\") ? connection.throttleCallback : null);\n    var throttleSlotInterval = ((typeof (connection) === \"object\" && typeof (connection.throttleSlotInterval) === \"number\") ? connection.throttleSlotInterval : 100);\n    logger.assertArgument((throttleSlotInterval > 0 && (throttleSlotInterval % 1) === 0), \"invalid connection throttle slot interval\", \"connection.throttleSlotInterval\", throttleSlotInterval);\n    var headers = {};\n    var url = null;\n    // @TODO: Allow ConnectionInfo to override some of these values\n    var options = {\n        method: \"GET\",\n    };\n    var allow304 = false;\n    var timeout = 2 * 60 * 1000;\n    if (typeof (connection) === \"string\") {\n        url = connection;\n    }\n    else if (typeof (connection) === \"object\") {\n        if (connection == null || connection.url == null) {\n            logger.throwArgumentError(\"missing URL\", \"connection.url\", connection);\n        }\n        url = connection.url;\n        if (typeof (connection.timeout) === \"number\" && connection.timeout > 0) {\n            timeout = connection.timeout;\n        }\n        if (connection.headers) {\n            for (var key in connection.headers) {\n                headers[key.toLowerCase()] = { key: key, value: String(connection.headers[key]) };\n                if ([\"if-none-match\", \"if-modified-since\"].indexOf(key.toLowerCase()) >= 0) {\n                    allow304 = true;\n                }\n            }\n        }\n        options.allowGzip = !!connection.allowGzip;\n        if (connection.user != null && connection.password != null) {\n            if (url.substring(0, 6) !== \"https:\" && connection.allowInsecureAuthentication !== true) {\n                logger.throwError(\"basic authentication requires a secure https url\", logger_1.Logger.errors.INVALID_ARGUMENT, { argument: \"url\", url: url, user: connection.user, password: \"[REDACTED]\" });\n            }\n            var authorization = connection.user + \":\" + connection.password;\n            headers[\"authorization\"] = {\n                key: \"Authorization\",\n                value: \"Basic \" + base64_1.encode(strings_1.toUtf8Bytes(authorization))\n            };\n        }\n    }\n    if (body) {\n        options.method = \"POST\";\n        options.body = body;\n        if (headers[\"content-type\"] == null) {\n            headers[\"content-type\"] = { key: \"Content-Type\", value: \"application/octet-stream\" };\n        }\n        if (headers[\"content-length\"] == null) {\n            headers[\"content-length\"] = { key: \"Content-Length\", value: String(body.length) };\n        }\n    }\n    var flatHeaders = {};\n    Object.keys(headers).forEach(function (key) {\n        var header = headers[key];\n        flatHeaders[header.key] = header.value;\n    });\n    options.headers = flatHeaders;\n    var runningTimeout = (function () {\n        var timer = null;\n        var promise = new Promise(function (resolve, reject) {\n            if (timeout) {\n                timer = setTimeout(function () {\n                    if (timer == null) {\n                        return;\n                    }\n                    timer = null;\n                    reject(logger.makeError(\"timeout\", logger_1.Logger.errors.TIMEOUT, {\n                        requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                        requestMethod: options.method,\n                        timeout: timeout,\n                        url: url\n                    }));\n                }, timeout);\n            }\n        });\n        var cancel = function () {\n            if (timer == null) {\n                return;\n            }\n            clearTimeout(timer);\n            timer = null;\n        };\n        return { promise: promise, cancel: cancel };\n    })();\n    var runningFetch = (function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var attempt, response, tryAgain, stall, retryAfter, error_1, body_1, result, error_2, tryAgain, timeout_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        attempt = 0;\n                        _a.label = 1;\n                    case 1:\n                        if (!(attempt < attemptLimit)) return [3 /*break*/, 19];\n                        response = null;\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 8, , 9]);\n                        return [4 /*yield*/, geturl_1.getUrl(url, options)];\n                    case 3:\n                        response = _a.sent();\n                        if (!(response.statusCode === 429 && attempt < attemptLimit)) return [3 /*break*/, 7];\n                        tryAgain = true;\n                        if (!throttleCallback) return [3 /*break*/, 5];\n                        return [4 /*yield*/, throttleCallback(attempt, url)];\n                    case 4:\n                        tryAgain = _a.sent();\n                        _a.label = 5;\n                    case 5:\n                        if (!tryAgain) return [3 /*break*/, 7];\n                        stall = 0;\n                        retryAfter = response.headers[\"retry-after\"];\n                        if (typeof (retryAfter) === \"string\" && retryAfter.match(/^[1-9][0-9]*$/)) {\n                            stall = parseInt(retryAfter) * 1000;\n                        }\n                        else {\n                            stall = throttleSlotInterval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                        }\n                        //console.log(\"Stalling 429\");\n                        return [4 /*yield*/, staller(stall)];\n                    case 6:\n                        //console.log(\"Stalling 429\");\n                        _a.sent();\n                        return [3 /*break*/, 18];\n                    case 7: return [3 /*break*/, 9];\n                    case 8:\n                        error_1 = _a.sent();\n                        response = error_1.response;\n                        if (response == null) {\n                            runningTimeout.cancel();\n                            logger.throwError(\"missing response\", logger_1.Logger.errors.SERVER_ERROR, {\n                                requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                                requestMethod: options.method,\n                                serverError: error_1,\n                                url: url\n                            });\n                        }\n                        return [3 /*break*/, 9];\n                    case 9:\n                        body_1 = response.body;\n                        if (allow304 && response.statusCode === 304) {\n                            body_1 = null;\n                        }\n                        else if (response.statusCode < 200 || response.statusCode >= 300) {\n                            runningTimeout.cancel();\n                            logger.throwError(\"bad response\", logger_1.Logger.errors.SERVER_ERROR, {\n                                status: response.statusCode,\n                                headers: response.headers,\n                                body: bodyify(body_1, ((response.headers) ? response.headers[\"content-type\"] : null)),\n                                requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                                requestMethod: options.method,\n                                url: url\n                            });\n                        }\n                        if (!processFunc) return [3 /*break*/, 17];\n                        _a.label = 10;\n                    case 10:\n                        _a.trys.push([10, 12, , 17]);\n                        return [4 /*yield*/, processFunc(body_1, response)];\n                    case 11:\n                        result = _a.sent();\n                        runningTimeout.cancel();\n                        return [2 /*return*/, result];\n                    case 12:\n                        error_2 = _a.sent();\n                        if (!(error_2.throttleRetry && attempt < attemptLimit)) return [3 /*break*/, 16];\n                        tryAgain = true;\n                        if (!throttleCallback) return [3 /*break*/, 14];\n                        return [4 /*yield*/, throttleCallback(attempt, url)];\n                    case 13:\n                        tryAgain = _a.sent();\n                        _a.label = 14;\n                    case 14:\n                        if (!tryAgain) return [3 /*break*/, 16];\n                        timeout_1 = throttleSlotInterval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                        //console.log(\"Stalling callback\");\n                        return [4 /*yield*/, staller(timeout_1)];\n                    case 15:\n                        //console.log(\"Stalling callback\");\n                        _a.sent();\n                        return [3 /*break*/, 18];\n                    case 16:\n                        runningTimeout.cancel();\n                        logger.throwError(\"processing response error\", logger_1.Logger.errors.SERVER_ERROR, {\n                            body: bodyify(body_1, ((response.headers) ? response.headers[\"content-type\"] : null)),\n                            error: error_2,\n                            requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                            requestMethod: options.method,\n                            url: url\n                        });\n                        return [3 /*break*/, 17];\n                    case 17:\n                        runningTimeout.cancel();\n                        // If we had a processFunc, it eitehr returned a T or threw above.\n                        // The \"body\" is now a Uint8Array.\n                        return [2 /*return*/, body_1];\n                    case 18:\n                        attempt++;\n                        return [3 /*break*/, 1];\n                    case 19: return [2 /*return*/, logger.throwError(\"failed response\", logger_1.Logger.errors.SERVER_ERROR, {\n                            requestBody: bodyify(options.body, flatHeaders[\"content-type\"]),\n                            requestMethod: options.method,\n                            url: url\n                        })];\n                }\n            });\n        });\n    })();\n    return Promise.race([runningTimeout.promise, runningFetch]);\n}\nexports._fetchData = _fetchData;\nfunction fetchJson(connection, json, processFunc) {\n    var processJsonFunc = function (value, response) {\n        var result = null;\n        if (value != null) {\n            try {\n                result = JSON.parse(strings_1.toUtf8String(value));\n            }\n            catch (error) {\n                logger.throwError(\"invalid JSON\", logger_1.Logger.errors.SERVER_ERROR, {\n                    body: value,\n                    error: error\n                });\n            }\n        }\n        if (processFunc) {\n            result = processFunc(result, response);\n        }\n        return result;\n    };\n    // If we have json to send, we must\n    // - add content-type of application/json (unless already overridden)\n    // - convert the json to bytes\n    var body = null;\n    if (json != null) {\n        body = strings_1.toUtf8Bytes(json);\n        // Create a connection with the content-type set for JSON\n        var updated = (typeof (connection) === \"string\") ? ({ url: connection }) : properties_1.shallowCopy(connection);\n        if (updated.headers) {\n            var hasContentType = (Object.keys(updated.headers).filter(function (k) { return (k.toLowerCase() === \"content-type\"); }).length) !== 0;\n            if (!hasContentType) {\n                updated.headers = properties_1.shallowCopy(updated.headers);\n                updated.headers[\"content-type\"] = \"application/json\";\n            }\n        }\n        else {\n            updated.headers = { \"content-type\": \"application/json\" };\n        }\n        connection = updated;\n    }\n    return _fetchData(connection, body, processJsonFunc);\n}\nexports.fetchJson = fetchJson;\nfunction poll(func, options) {\n    if (!options) {\n        options = {};\n    }\n    options = properties_1.shallowCopy(options);\n    if (options.floor == null) {\n        options.floor = 0;\n    }\n    if (options.ceiling == null) {\n        options.ceiling = 10000;\n    }\n    if (options.interval == null) {\n        options.interval = 250;\n    }\n    return new Promise(function (resolve, reject) {\n        var timer = null;\n        var done = false;\n        // Returns true if cancel was successful. Unsuccessful cancel means we're already done.\n        var cancel = function () {\n            if (done) {\n                return false;\n            }\n            done = true;\n            if (timer) {\n                clearTimeout(timer);\n            }\n            return true;\n        };\n        if (options.timeout) {\n            timer = setTimeout(function () {\n                if (cancel()) {\n                    reject(new Error(\"timeout\"));\n                }\n            }, options.timeout);\n        }\n        var retryLimit = options.retryLimit;\n        var attempt = 0;\n        function check() {\n            return func().then(function (result) {\n                // If we have a result, or are allowed null then we're done\n                if (result !== undefined) {\n                    if (cancel()) {\n                        resolve(result);\n                    }\n                }\n                else if (options.oncePoll) {\n                    options.oncePoll.once(\"poll\", check);\n                }\n                else if (options.onceBlock) {\n                    options.onceBlock.once(\"block\", check);\n                    // Otherwise, exponential back-off (up to 10s) our next request\n                }\n                else if (!done) {\n                    attempt++;\n                    if (attempt > retryLimit) {\n                        if (cancel()) {\n                            reject(new Error(\"retry limit reached\"));\n                        }\n                        return;\n                    }\n                    var timeout = options.interval * parseInt(String(Math.random() * Math.pow(2, attempt)));\n                    if (timeout < options.floor) {\n                        timeout = options.floor;\n                    }\n                    if (timeout > options.ceiling) {\n                        timeout = options.ceiling;\n                    }\n                    setTimeout(check, timeout);\n                }\n                return null;\n            }, function (error) {\n                if (cancel()) {\n                    reject(error);\n                }\n            });\n        }\n        check();\n    });\n}\nexports.poll = poll;\n//# sourceMappingURL=index.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","staller","duration","Promise","resolve","setTimeout","bodyify","value","type","bytes_1","isBytesLike","split","trim","strings_1","toUtf8String","error","hexlify","_fetchData","connection","body","processFunc","attemptLimit","throttleLimit","logger","assertArgument","throttleCallback","throttleSlotInterval","headers","url","options","method","allow304","timeout","throwArgumentError","key","toLowerCase","String","indexOf","allowGzip","user","password","substring","allowInsecureAuthentication","throwError","logger_1","Logger","errors","INVALID_ARGUMENT","argument","base64_1","encode","toUtf8Bytes","length","flatHeaders","Object","keys","forEach","header","runningTimeout","timer","promise","reject","makeError","TIMEOUT","requestBody","requestMethod","cancel","clearTimeout","runningFetch","__awaiter","attempt","response","tryAgain","stall","retryAfter","error_1","body_1","result","error_2","timeout_1","__generator","_a","label","trys","push","geturl_1","getUrl","sent","statusCode","match","parseInt","Math","random","pow","SERVER_ERROR","serverError","status","throttleRetry","race","thisArg","_arguments","P","generator","adopt","fulfilled","step","next","e","rejected","done","then","apply","verb","n","v","op","f","TypeError","_","y","t","call","ops","pop","g","Symbol","iterator","defineProperty","poll","fetchJson","properties_1","_version_1","version","json","updated","shallowCopy","filter","k","processJsonFunc","JSON","parse","func","floor","ceiling","interval","check","undefined","oncePoll","once","onceBlock","retryLimit","Error"]
}
