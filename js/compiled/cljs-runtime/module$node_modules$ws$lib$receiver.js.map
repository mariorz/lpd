{
"version":3,
"file":"module$node_modules$ws$lib$receiver.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/ws/lib/receiver.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ws$lib$receiver\"] = function(global,require,module,exports) {\nvar Buffer = require('buffer').Buffer;\n'use strict';\n\nconst stream = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst bufferUtil = require('./buffer-util');\nconst validation = require('./validation');\nconst constants = require('./constants');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends stream.Writable\n */\nclass Receiver extends stream.Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} binaryType The type for binary data\n   * @param {Object} extensions An object containing the negotiated extensions\n   * @param {Number} maxPayload The maximum allowed message length\n   */\n  constructor (binaryType, extensions, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || constants.BINARY_TYPES[0];\n    this[constants.kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   */\n  _write (chunk, encoding, cb) {\n    if (this._opcode === 0x08) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume (n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n\n      if (n >= buf.length) {\n        this._buffers.shift().copy(dst, dst.length - n);\n      } else {\n        buf.copy(dst, dst.length - n, 0, n);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop (cb) {\n    var err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default: // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo () {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(RangeError, 'RSV2 and RSV3 must be clear', true, 1002);\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(RangeError, 'RSV1 must be clear', true, 1002);\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(RangeError, 'RSV1 must be clear', true, 1002);\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(RangeError, 'invalid opcode 0', true, 1002);\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(RangeError, `invalid opcode ${this._opcode}`, true, 1002);\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(RangeError, 'FIN must be set', true, 1002);\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(RangeError, 'RSV1 must be clear', true, 1002);\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(RangeError, `invalid opcode ${this._opcode}`, true, 1002);\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16 () {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64 () {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength () {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(RangeError, 'Max payload size exceeded', false, 1009);\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask () {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData (cb) {\n    var data = constants.EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) bufferUtil.unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress (data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(error(RangeError, 'Max payload size exceeded', false, 1009));\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage () {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        var data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = toBuffer(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(toBuffer(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = toBuffer(fragments, messageLength);\n\n        if (!validation.isValidUTF8(buf)) {\n          this._loop = false;\n          return error(Error, 'invalid UTF-8 sequence', true, 1007);\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage (data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(RangeError, 'invalid payload length 1', true, 1002);\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!validation.isValidStatusCode(code)) {\n          return error(RangeError, `invalid status code ${code}`, true, 1002);\n        }\n\n        const buf = data.slice(2);\n\n        if (!validation.isValidUTF8(buf)) {\n          return error(Error, 'invalid UTF-8 sequence', true, 1007);\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n\n      return;\n    }\n\n    if (this._opcode === 0x09) this.emit('ping', data);\n    else this.emit('pong', data);\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {(Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error (ErrorCtor, message, prefix, statusCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err[constants.kStatusCode] = statusCode;\n  return err;\n}\n\n/**\n * Makes a buffer from a list of fragments.\n *\n * @param {Buffer[]} fragments The list of fragments composing the message\n * @param {Number} messageLength The length of the message\n * @return {Buffer}\n * @private\n */\nfunction toBuffer (fragments, messageLength) {\n  if (fragments.length === 1) return fragments[0];\n  if (fragments.length > 1) return bufferUtil.concat(fragments, messageLength);\n  return constants.EMPTY_BUFFER;\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n */\nfunction toArrayBuffer (buf) {\n  if (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","error","ErrorCtor","message","prefix","statusCode","err","Error","captureStackTrace","constants","kStatusCode","toBuffer","fragments","messageLength","length","bufferUtil","concat","EMPTY_BUFFER","Buffer","stream","PerMessageDeflate","validation","Receiver","Writable","constructor","binaryType","extensions","maxPayload","_binaryType","BINARY_TYPES","kWebSocket","undefined","_extensions","_maxPayload","_bufferedBytes","_buffers","_compressed","_payloadLength","_mask","_fragmented","_fin","_masked","_messageLength","_totalPayloadLength","_opcode","_fragments","_state","GET_INFO","_loop","_write","chunk","encoding","cb","push","startLoop","consume","n","shift","buf","slice","dst","allocUnsafe","copy","getInfo","GET_PAYLOAD_LENGTH_16","getPayloadLength16","GET_PAYLOAD_LENGTH_64","getPayloadLength64","GET_MASK","getMask","GET_DATA","getData","RangeError","compressed","extensionName","haveLength","readUInt16BE","num","readUInt32BE","Math","pow","data","unmask","controlMessage","INFLATING","decompress","dataMessage","perMessageDeflate","er","byteOffset","byteLength","buffer","emit","isValidUTF8","toString","end","code","isValidStatusCode"]
}
