{
"version":3,
"file":"module$node_modules$async_mutex$lib$withTimeout.js",
"lineCount":3,
"mappings":"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",
"sources":["node_modules/async-mutex/lib/withTimeout.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$async_mutex$lib$withTimeout\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.withTimeout = void 0;\nvar tslib_1 = require(\"tslib\");\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction withTimeout(sync, timeout, timeoutError) {\n    var _this = this;\n    if (timeoutError === void 0) { timeoutError = new Error('timeout'); }\n    return {\n        acquire: function () {\n            return new Promise(function (resolve, reject) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n                var isTimeout, ticket, release;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            isTimeout = false;\n                            setTimeout(function () {\n                                isTimeout = true;\n                                reject(timeoutError);\n                            }, timeout);\n                            return [4 /*yield*/, sync.acquire()];\n                        case 1:\n                            ticket = _a.sent();\n                            if (isTimeout) {\n                                release = Array.isArray(ticket) ? ticket[1] : ticket;\n                                release();\n                            }\n                            else {\n                                resolve(ticket);\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        },\n        runExclusive: function (callback) {\n            return tslib_1.__awaiter(this, void 0, void 0, function () {\n                var release, ticket;\n                return tslib_1.__generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            release = function () { return undefined; };\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 7, 8]);\n                            return [4 /*yield*/, this.acquire()];\n                        case 2:\n                            ticket = _a.sent();\n                            if (!Array.isArray(ticket)) return [3 /*break*/, 4];\n                            release = ticket[1];\n                            return [4 /*yield*/, callback(ticket[0])];\n                        case 3: return [2 /*return*/, _a.sent()];\n                        case 4:\n                            release = ticket;\n                            return [4 /*yield*/, callback()];\n                        case 5: return [2 /*return*/, _a.sent()];\n                        case 6: return [3 /*break*/, 8];\n                        case 7:\n                            release();\n                            return [7 /*endfinally*/];\n                        case 8: return [2 /*return*/];\n                    }\n                });\n            });\n        },\n        release: function () {\n            sync.release();\n        },\n        isLocked: function () { return sync.isLocked(); },\n    };\n}\nexports.withTimeout = withTimeout;\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","withTimeout","tslib_1","sync","timeout","timeoutError","_this","Error","acquire","Promise","resolve","reject","__awaiter","isTimeout","ticket","release","__generator","_a","label","setTimeout","sent","Array","isArray","runExclusive","callback","trys","push","isLocked"]
}
