shadow$provide.module$node_modules$string_decoder$index=function(global,require,module,exports){function passThroughWrite(buffer){return buffer.toString(this.encoding)}function utf16DetectIncompleteChar(buffer){this.charLength=(this.charReceived=buffer.length%2)?2:0}function base64DetectIncompleteChar(buffer){this.charLength=(this.charReceived=buffer.length%3)?3:0}var Buffer=require("module$node_modules$buffer$index").Buffer,isBufferEncoding=Buffer.isEncoding||function(encoding){switch(encoding&&
encoding.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};global=exports.StringDecoder=function(encoding){this.encoding=(encoding||"utf8").toLowerCase().replace(/[-_]/,"");if(encoding&&!isBufferEncoding(encoding))throw Error("Unknown encoding: "+encoding);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=
2;this.detectIncompleteChar=utf16DetectIncompleteChar;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer(6);this.charLength=this.charReceived=0};global.prototype.write=function(buffer){for(var charStr="";this.charLength;){charStr=buffer.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:buffer.length;buffer.copy(this.charBuffer,this.charReceived,0,charStr);
this.charReceived+=charStr;if(this.charReceived<this.charLength)return"";buffer=buffer.slice(charStr,buffer.length);charStr=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var charCode=charStr.charCodeAt(charStr.length-1);if(55296<=charCode&&56319>=charCode)this.charLength+=this.surrogateSize,charStr="";else{this.charReceived=this.charLength=0;if(0===buffer.length)return charStr;break}}this.detectIncompleteChar(buffer);var end=buffer.length;this.charLength&&(buffer.copy(this.charBuffer,
0,buffer.length-this.charReceived,end),end-=this.charReceived);charStr+=buffer.toString(this.encoding,0,end);end=charStr.length-1;charCode=charStr.charCodeAt(end);return 55296<=charCode&&56319>=charCode?(charCode=this.surrogateSize,this.charLength+=charCode,this.charReceived+=charCode,this.charBuffer.copy(this.charBuffer,charCode,0,charCode),buffer.copy(this.charBuffer,0,0,charCode),charStr.substring(0,end)):charStr};global.prototype.detectIncompleteChar=function(buffer){for(var i=3<=buffer.length?
3:buffer.length;0<i;i--){var c=buffer[buffer.length-i];if(1==i&&6==c>>5){this.charLength=2;break}if(2>=i&&14==c>>4){this.charLength=3;break}if(3>=i&&30==c>>3){this.charLength=4;break}}this.charReceived=i};global.prototype.end=function(buffer){var res="";buffer&&buffer.length&&(res=this.write(buffer));this.charReceived&&(buffer=this.encoding,res+=this.charBuffer.slice(0,this.charReceived).toString(buffer));return res}}
//# sourceMappingURL=module$node_modules$string_decoder$index.js.map
